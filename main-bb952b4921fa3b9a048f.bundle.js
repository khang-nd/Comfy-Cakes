(()=>{"use strict";var e,t,i,s={114:(e,t,i)=>{var s,a,r,n,o,h,l,c,d=i(260),p=i.n(d);!function(e){e.BROWN="BROWN_FLOUR",e.PINK="PINK_FLOUR",e.YELLOW="YELLOW_FLOUR"}(s||(s={})),function(e){e.BROWN="BROWN_CREAM",e.PINK="PINK_CREAM",e.YELLOW="YELLOW_CREAM"}(a||(a={})),function(e){e.RED="RED_RIBBON",e.GREEN="GREEN_RIBBON",e.WHITE="WHITE_RIBBON"}(r||(r={})),function(e){e.BUTTONS="BUTTONS_DECORATE",e.HEART="HEART_DECORATE",e.LEAF="LEAF_DECORATE",e.EMOTICON="EMOTICON"}(n||(n={})),function(e){e.CIRCLE="CIRCLE_FRAME",e.SQUARE="SQUARE_FRAME",e.HEART="HEART_FRAME"}(o||(o={})),function(e){e.BURN="BURN_TASTE",e.SPICE="SPICE_TASTE"}(h||(h={})),function(e){e[e.FRAME=0]="FRAME",e[e.FLOUR=1]="FLOUR",e[e.RIBBON=2]="RIBBON",e[e.CREAM=3]="CREAM",e[e.DECORATE=4]="DECORATE",e[e.TASTE=5]="TASTE"}(l||(l={})),function(e){e[e.EASY=1]="EASY",e[e.INTERMEDIATE=2]="INTERMEDIATE",e[e.ADVANCED=3]="ADVANCED"}(c||(c={}));class m{}m.VERSION="0.0",m.DEVELOPMENT=!0,m.SAVED_GAME_DATA_KEY="comfy-cakes-key",m.LANGUAGE_ENGLISH="en",m.VERBOSE=!1,m.DELAY=5;class u{static areValidDomains(e){if(0===e.length)return!0;const t=window.location.hostname,i=document.referrer;let s=!1;for(let i=0;i<e.length;i++)if(-1!==t.indexOf(e[i])){s=!0;break}if(i){s=!1;for(let t=0;t<e.length;t++)if(-1!==i.indexOf(e[t])){s=!0;break}}return s}static fixNumber(e){return isNaN(e)?0:Math.round(1e5*e)/1e5}static formatTime(e){if(isNaN(e)||e>86400)return{str:"0:00:00",h:"00",m:"00",s:"00"};const t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),s=e-3600*t-60*i;let a=t.toString(),r=i.toString(),n=s.toString();return t<10&&(a="0"+t),i<10&&(r="0"+i),s<10&&(n="0"+s),{str:a+":"+r+":"+n,h:a,m:r,s:n}}static formatNumber(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}static getDate(){const e=new Date,t=e.getUTCDate();let i,s="";switch(e.getUTCDay()){case 0:s=u.gameText[u.gameData.language].SUNDAY;break;case 1:s=u.gameText[u.gameData.language].MONDAY;break;case 2:s=u.gameText[u.gameData.language].TUESDAY;break;case 3:s=u.gameText[u.gameData.language].WEDNESDAY;break;case 4:s=u.gameText[u.gameData.language].THURSDAY;break;case 5:s=u.gameText[u.gameData.language].FRIDAY;break;case 6:s=u.gameText[u.gameData.language].SATURDAY}return i=t%10==1?t+"st":t%10==2?t+"nd":t%10==3?t+"rd":t+"th",s+" "+i}}class g{static init(){u.development=!1,this.currentInstance=this,u.currentScene.game.device.os.desktop,g.startGame()}static readGameData(){g.getGameStorageData(m.SAVED_GAME_DATA_KEY,(function(e){u.gameData=e?JSON.parse(e):{googleUser:null,soundMuted:!1,musicMuted:!1,language:m.LANGUAGE_ENGLISH,score:0,tutorialSeen:!1},g.startGame()}))}static startGame(){u.currentScene.scene.start("Preload")}static getGameStorageData(e,t){t(localStorage.getItem(e))}static enterPlayScene(){u.currentScene.scene.start("PlayScene")}static enterMenuScene(){u.currentScene.scene.start("MenuScene")}static setCurrentScene(e){u.currentScene&&(u.prevScene=u.currentScene.scene.key),u.currentScene=e}static reset(){u.gameOver?g.enterMenuScene():g.enterPlayScene()}static writeGameData(){g.setGameStorageData(m.SAVED_GAME_DATA_KEY,u.gameData,(function(){g.log("game data successfully saved")}))}static log(e,t){m.VERBOSE&&(t?console.error(e+":",t):console.log(e))}static getTimeUntilEndOfDay(){const e=new Date;return 86400-60*e.getUTCHours()*60-60*e.getUTCMinutes()-e.getUTCSeconds()}static setGameStorageData(e,t,i){localStorage.setItem(e,JSON.stringify(t)),i()}static hashCode(e){return e.split("").reduce((function(e,t){return(e=(e<<5)-e+t.charCodeAt(0))&e}),0).toString()}}class f{constructor(e){let t,i,l,d,p,m;switch(this.features=[],e){case c.EASY:t=this.getRandom(o),this.features.push(t);for(let t=0;t<e;t++)i=this.getRandom(s),d=this.getRandom(a),p=this.getRandom(n),this.features.push(i),this.features.push(d),this.features.push(p);break;case c.INTERMEDIATE:t=this.getRandom(o);for(let o=0;o<e;o++)this.features.push(t),i=this.getRandom(s),l=this.getRandom(r),this.features.push(i),o<e-1&&this.features.push(l),o==e-1&&(d=this.getRandom(a),p=this.getRandom(n),this.features.push(d),this.features.push(p));break;case c.ADVANCED:t=this.getRandom(o);for(let o=0;o<e;o++)this.features.push(t),i=this.getRandom(s),l=this.getRandom(r),this.features.push(i),o<e-1&&this.features.push(l),o==e-1&&(d=this.getRandom(a),p=this.getRandom(n),m=this.getRandom(h),this.features.push(d),this.features.push(p),this.features.push(m))}}getRandom(e){const t=Object.keys(e);return e[t[Math.floor(Math.random()*t.length)]]}}class y extends p().GameObjects.Container{constructor(e,t,i){super(e,null!=t?t:0,null!=i?i:0),this.features=[],this.canMove=!0;const s=e.add.image(0,0,"comfy-spritesheet","tableCloths.png");this.add(s),this.tableCloth=s,e.add.existing(this),this.scaleX=this.scaleY=.9}}class b{static scaleFix(e,t,i){let s=t,a=i,r=Math.max(s/e.width,a/e.height);e.setScale(r)}static scaleSprite(e,t,i,s,a,r=!1){let n=b.getSpriteScale(e.width,e.height,t,i,s,r);e.setScale(n*a)}static scaleText(e,t,i,s,a,r=!1){let n=e.width,o=e.height,h=this.getSpriteScale(n,o,t,i,s,r);e.setScale(h*a)}static getSpriteScale(e,t,i,s,a,r=!1){let n=1,o=window.devicePixelRatio,h=(e*o+2*a)/i,l=(t*o+2*a)/s;return(h>1||l>1||r)&&(n=1/Math.max(h,l)),n*o}static getRand(e,t){return Math.floor(Math.random()*e+t)}static toRad(e){return e*(Math.PI/180)}static getPadding(e){let t=0;switch(e){case s.BROWN:case s.PINK:case s.YELLOW:case o.CIRCLE:case o.HEART:case o.SQUARE:t=-20;break;case r.GREEN:case r.RED:case r.WHITE:case a.BROWN:case a.PINK:case a.YELLOW:t=-5}return t}static calPaddingY(e){let t=0;for(let i=0;i<e.length;i++)e[i]!=s.BROWN&&e[i]!=s.PINK&&e[i]!=s.YELLOW&&(t+=this.getPadding(e[i]));return t}static getSize(e,t){let i=e.sys.game.scale.gameSize.height,s=0,a=e.sys.game.scale.gameSize.width,r=0;t.iterate(function(e){let t=e.x,n=e.y,o=e.displayWidth,h=e.displayHeight,l=n-h*e.originY,c=n+h*(1-e.originY),d=t-o*e.originX,p=t+o*(1-e.originY);c>s&&(s=c),l<i&&(i=l),d<a&&(a=d),p>r&&(r=p)}.bind(this));let n=Math.abs(i-s),o=Math.abs(r-a);t.setSize(o,n)}static checkOverlap(e,t,i=!1){let s,a;return i?(s=e.getBounds().setSize(10),a=t.getBounds().setSize(10)):(s=e.getBounds(),a=t.getBounds().setSize(t.displayWidth-2*e.displayWidth,t.displayHeight)),Phaser.Geom.Intersects.RectangleToRectangle(s,a)}}class E{constructor(e){this.scene=e.scene;const t=this.awake!==E.prototype.awake,i=this.start!==E.prototype.start,s=this.update!==E.prototype.update,a=this.destroy!==E.prototype.destroy;t&&this.scene.events.once("scene-awake",this.awake,this),i&&this.scene.events.once(p().Scenes.Events.UPDATE,this.start,this),s&&this.scene.events.on(p().Scenes.Events.UPDATE,this.update,this),(i||s||a)&&e.on(p().GameObjects.Events.DESTROY,(()=>{this.scene.events.off(p().Scenes.Events.UPDATE,this.start,this),this.scene.events.off(p().Scenes.Events.UPDATE,this.update,this),a&&this.destroy()}))}awake(){}start(){}update(){}destroy(){}}let S,_,v;class O extends E{constructor(e){super(e),this.alignVer="center",this.gameAreaVer=10,this.minLeftWidthVer=0,this.minRightWidthVer=0,this.minUpHeightVer=0,this.minDownHeightVer=0,this.alignHor="center",this.gameAreaHor=10,this.minLeftWidthHor=0,this.minRightWidthHor=0,this.minUpHeightHor=0,this.minDownHeightHor=0,this.gameObject=e,e.__AlignCanvas=this,e.scene.events.once("scene-awake",(()=>{this.startResizeComponent()}))}static getComponent(e){return e.__AlignCanvas}startResizeComponent(){_={gameArea:Math.abs(this.gameAreaVer),minLeftWidth:Math.abs(this.minLeftWidthVer),minRightWidth:Math.abs(this.minRightWidthVer),minUpHeight:Math.abs(this.minUpHeightVer),minDownHeight:Math.abs(this.minDownHeightVer)},v={gameArea:Math.abs(this.gameAreaHor),minLeftWidth:Math.abs(this.minLeftWidthHor),minRightWidth:Math.abs(this.minRightWidthHor),minUpHeight:Math.abs(this.minUpHeightHor),minDownHeight:Math.abs(this.minDownHeightHor)},S=this.gameObject.scene,S.scale.on("resize",this.resize,this),this.resize({width:S.scale.gameSize.width,height:S.scale.gameSize.height})}resize(e){let t=e.width,i=e.height;const s=globalThis.screenBaseSize.width,a=globalThis.screenBaseSize.height,r=S.cameras.main,n=Math.min(t/s,i/a);let o,h,l,c,d,p,m,u;t>i?(o=(v.minLeftWidth+v.minRightWidth)/(v.gameArea+v.minLeftWidth+v.minRightWidth),h=v.minLeftWidth/(v.gameArea+v.minLeftWidth+v.minRightWidth),l=v.minRightWidth/(v.gameArea+v.minLeftWidth+v.minRightWidth),c=(v.minUpHeight+v.minDownHeight)/(v.gameArea+v.minUpHeight+v.minDownHeight),d=v.minUpHeight/(v.gameArea+v.minUpHeight+v.minDownHeight),p=v.minDownHeight/(v.gameArea+v.minUpHeight+v.minDownHeight),m=v.gameArea/(v.gameArea+v.minLeftWidth+v.minRightWidth),u=v.gameArea/(v.gameArea+v.minUpHeight+v.minDownHeight)):(o=(_.minLeftWidth+_.minRightWidth)/(_.gameArea+_.minLeftWidth+_.minRightWidth),h=_.minLeftWidth/(_.gameArea+_.minLeftWidth+_.minRightWidth),l=_.minRightWidth/(_.gameArea+_.minLeftWidth+_.minRightWidth),c=(_.minUpHeight+_.minDownHeight)/(_.gameArea+_.minUpHeight+_.minDownHeight),d=_.minUpHeight/(_.gameArea+_.minUpHeight+_.minDownHeight),p=_.minDownHeight/(_.gameArea+_.minUpHeight+_.minDownHeight),m=_.gameArea/(_.gameArea+_.minLeftWidth+_.minRightWidth),u=_.gameArea/(_.gameArea+_.minUpHeight+_.minDownHeight));const g=s*n,f=a*n,y=t*m/g,b=i*u/f,E=Math.min(b,y);if(r.setZoom(n*E*(globalThis.zoomScalar||1)),t>i){const e=v.minUpHeight/(v.minDownHeight+v.minUpHeight)||0,s=-i*c*(.5*((v.minDownHeight/(v.minDownHeight+v.minUpHeight)||0)-e))-i/2;"right"==this.alignHor?(r.setViewport(-l*t-g/2*E,s,2*t,2*i),globalThis.gameAreaLeftX=t-l*t-g*E):"left"==this.alignHor?(r.setViewport(h*t-t+.5*g*E,s,2*t,2*i),globalThis.gameAreaLeftX=h*t):"center"==this.alignHor&&(r.setViewport((h-l)*t*.5-t/2,s,2*t,2*i),globalThis.gameAreaLeftX=.5*t-t*(l-h)*.5-.5*g*E),globalThis.gameAreaCenterX=.5*t-t*(l-h)*.5,globalThis.gameAreaCenterY=i-g*p-f*(1-c)*.5,globalThis.gameAreaTopY=globalThis.gameAreaCenterY-.5*f*E,globalThis.gameAreaBottomY=i-f*p,globalThis.gameAreaRightX=globalThis.gameAreaLeftX+g*E,globalThis.gameAreaAvailableSpace={left:globalThis.gameAreaLeftX,right:t-globalThis.gameAreaRightX,top:globalThis.gameAreaTopY,bottom:i-globalThis.gameAreaBottomY}}else{const e=_.minLeftWidth/(_.minLeftWidth+_.minRightWidth)||0,s=-t*o*(.5*((_.minRightWidth/(_.minLeftWidth+_.minRightWidth)||0)-e))-t/2;"bottom"==this.alignVer?(r.setViewport(s,-p*i-f/2*E,2*t,2*i),globalThis.gameAreaTopY=i-p*i-f*E):"top"==this.alignVer?(r.setViewport(s,d*i-i+f/2*E,2*t,2*i),globalThis.gameAreaTopY=d*i):"center"==this.alignVer&&(r.setViewport(s,(d-p)*i*.5-i/2,2*t,2*i),globalThis.gameAreaTopY=.5*i+i*(d-p)*.5-.5*f*E),globalThis.gameAreaLeftX=.5*t-t*(l-h)*.5-.5*g*E,globalThis.gameAreaRightX=globalThis.gameAreaLeftX+g*E,globalThis.gameAreaBottomY=globalThis.gameAreaTopY+f*E,globalThis.gameAreaCenterX=globalThis.gameAreaLeftX+g*E*.5,globalThis.gameAreaCenterY=globalThis.gameAreaTopY+f*E*.5,globalThis.gameAreaAvailableSpace={left:globalThis.gameAreaLeftX,right:t-globalThis.gameAreaRightX,top:globalThis.gameAreaTopY,bottom:i-globalThis.gameAreaBottomY}}r.scrollX=.5*s-.5*r.width,r.scrollY=.5*a-.5*r.height}}class k extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"left_carousel_00.png"),this.setOrigin(0,0)}}var C;!function(e){e.DESTROY="destroy",e.INIT="init"}(C||(C={}));const R=C;class w{constructor(e){this._events=new(p().Events.EventEmitter),this._events=new(p().Events.EventEmitter)}destroy(e=!1){this._events.emit(R.DESTROY,this),this._events.destroy()}get events(){return this._events}get scene(){return(e=this.getGameObject())?e.scene:null;var e}}class T extends w{getVisibleComponent(){return this.getGameObject()}}var A;!function(e){e.DOUBLE_PRESS="buttonDoublePress",e.INIT_INTERACTIVE_DATA="buttonInitInteractiveData",e.POINTER_DOWN="buttonPointerDown",e.POINTER_OUT="buttonPointerOut",e.POINTER_OVER="buttonPointerOver",e.POINTER_UP="buttonPointerUp",e.SLEEP="buttonSleep",e.SOUND_COMPLETE="buttonSoundComplete",e.WAKE="buttonWake"}(A||(A={}));const I=A;class N extends T{constructor(e){super(e),this.context=this.scene,this.eventName="",this.defaultEnabled=!0,this.pressedSoundKey="",this.downSoundKey="",this.gameObject=e,e.__ButtonComponent=this,this.gameObject?(this.scene.events.on(p().Scenes.Events.UPDATE,this.onSceneUpdate,this),this.gameObject.once(p().GameObjects.Events.DESTROY,this.onDestroy,this)):console.warn("No Phaser game object specified in ButtonComponent constructor."),this.doublePressMaxTime=N.DEFAULT_DOUBLE_PRESS_MAX_TIME,this.doublePressSize=N.DEFAULT_DOUBLE_PRESS_SIZE,this._isDoublePressEnabled=!1}static getComponent(e){return e.__ButtonComponent}destroy(e=!1){super.destroy(e),this.resetCursorIfOverOrDown(),this.updateAfterNonVisible(),this.destroyDoublePressTimer(),this.scene&&(this.scene.events.off(p().Scenes.Events.UPDATE,this.onSceneUpdate,this),this.scene.events.off(p().Scenes.Events.SLEEP,this.onSceneSleep,this)),e||this.gameObject&&(this.gameObject.off(p().GameObjects.Events.DESTROY,this.onDestroy,this),this.gameObject.destroy()),this.gameObject=null}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this.gameObject&&this.gameObject.input&&(this.gameObject.input.enabled=this._enabled),this._enabled?this.updateAfterEnabled():this.updateAfterDisable()}getGameObject(){return this.gameObject}get isDoublePressEnabled(){return this._isDoublePressEnabled}set isDoublePressEnabled(e){this._isDoublePressEnabled=e,this._isDoublePressEnabled||this.destroyDoublePressTimer()}get isDown(){return this._isDown}get isOver(){return this._isOver}static ResolveFrame(e){let t=0;for(;t<e.length-1;t+=1){const i=e[t];if(i)return i}return e[t]}updateButtonImage(){const e=this.getGameObject();if(!N.IsTextureImage(e))return;let t;t=this.enabled?this._isDown?this._isOver?N.ResolveFrame([this.downFrame,this.overFrame,this.normFrame]):this.normFrame:this._isOver?N.ResolveFrame([this.overFrame,this.normFrame]):this.normFrame:N.ResolveFrame([this.disabledFrame,this.normFrame]),t&&e.setTexture(t.key,t.frame)}get visible(){const e=this.getVisibleComponent();return e&&e.visible}set visible(e){const t=this.getVisibleComponent();t&&(t.visible=e)}destroyDoublePressTimer(){this.doublePressTimer&&(this.doublePressTimer.destroy(),this.doublePressTimer=null)}doublePressAction(){this.events.emit(I.DOUBLE_PRESS,this)}handleInputDoublePress(e,t){this.isHandlingDoublePress?this.handleInputDoublePressPhase2(e,t):this.handleInputDoublePressPhase1(e,t)}handleInputDoublePressPhase1(e,t){this.doublePressTimer=this.scene.time.addEvent({delay:this.doublePressMaxTime,callback:this.onDoublePressTimerComplete,callbackScope:this}),this.lastPressTime=this.scene.game.loop.now,this.isHandlingDoublePress=!0,this.doublePressArea=new(p().Geom.Rectangle)(e-this.doublePressSize/2,t-this.doublePressSize/2,this.doublePressSize,this.doublePressSize),this.handleInputDown()}handleInputDoublePressPhase2(e,t){this.isHandlingDoublePress=!1;const i=this.scene.game.loop.now-this.lastPressTime;this.doublePressArea.contains(e,t)&&i<this.doublePressMaxTime&&(this.destroyDoublePressTimer(),this.doublePressAction())}handleInputDown(){this._isDown=!0,N.capturedButton=this,this.updateButtonImage(),this.scene.input.once(p().Input.Events.POINTER_UP,this.onScenePointerUp,this),this.playDownSound(),this.events.emit(I.POINTER_DOWN,this)}handleInputOut(){const e=N.capturedButton;e?e===this?(this._isOver=!1,this.updateButtonImage()):N.overNonCapturedButton=null:(this._isOver=!1,this.updateButtonImage()),this.events.emit(I.POINTER_OUT,this)}handleInputOver(){const e=N.capturedButton;e?e===this?(this._isOver=!0,this.updateButtonImage()):N.overNonCapturedButton=this:this.scene.input.activePointer.primaryDown?(N.overNonCapturedButton=this,this.scene.input.once(p().Input.Events.POINTER_UP,this.onScenePointerUp,this)):(this._isOver=!0,this.updateButtonImage()),this.events.emit(I.POINTER_OVER,this)}handleInputUp(){const e=N.capturedButton;N.capturedButton=null,e===this&&(this._isDown=!1,this.events.emit(I.POINTER_UP,this),this._isOver&&(this.updateButtonImage(),this.isHandlingDoublePress||this.handlePressed()));const t=N.overNonCapturedButton;t&&(N.overNonCapturedButton=null,t.handleInputOver())}handlePressed(){this.playPressedSound(),this.callback&&this.callback.call(this.context,this),this.eventName&&this.scene.events.emit(this.eventName,this)}init(){this._isInit=!0;const e={pixelPerfect:!1,useHandCursor:!0};this.events.emit(I.INIT_INTERACTIVE_DATA,e),void 0===e.pixelPerfect&&(e.pixelPerfect=!1),void 0===e.useHandCursor&&(e.useHandCursor=!0),this.inputConfig=e,this.gameObject&&(this.gameObject.setInteractive(this.inputConfig),this.gameObject.on(p().Input.Events.GAMEOBJECT_POINTER_DOWN,this.onInputDown,this),this.gameObject.on(p().Input.Events.GAMEOBJECT_POINTER_OVER,this.onInputOver,this),this.gameObject.on(p().Input.Events.GAMEOBJECT_POINTER_OUT,this.onInputOut,this)),void 0!==this._enabled?this.enabled=this._enabled:this.enabled=this.defaultEnabled,this.lastIsVisible=this.isVisibleChain(),this.scene.events.once(p().Scenes.Events.SLEEP,this.onSceneSleep,this),this.events.emit(R.INIT,this)}static IsTextureImage(e){return e&&"setTexture"in e}isVisibleChain(){const e=this.getVisibleComponent();if(!e||!e.visible)return!1;let t=this.gameObject?this.gameObject.parentContainer:null;for(;t;){if(!t.visible)return!1;t=t.parentContainer}return!0}onDestroy(){this.destroy(!0)}onDoublePressTimerComplete(){this.destroyDoublePressTimer(),this.isHandlingDoublePress=!1,this.isOver&&!this.isDown&&this.handlePressed()}onInputDown(e,t,i,s){this.isDoublePressEnabled?this.handleInputDoublePress(t,i):this.handleInputDown(),s.stopPropagation()}onInputOut(e,t){this.handleInputOut(),t.stopPropagation()}onInputOver(e,t,i,s){this.handleInputOver(),s.stopPropagation()}onScenePointerUp(){this.handleInputUp()}onSceneSleep(){this.resetCursorIfOverOrDown(),this._isDown=!1,this._isOver=!1,this.updateCapturedStatesAfterOff(),this.scene.input.off(p().Input.Events.POINTER_UP,this.onScenePointerUp,this),this.scene.events.once(p().Scenes.Events.WAKE,this.onSceneWake,this),this.events.emit(I.SLEEP,this)}onSceneUpdate(){this._isInit?this.updatePostInit():this.updatePreInit()}onSceneWake(){this.updateButtonImage(),this.scene.events.once(p().Scenes.Events.SLEEP,this.onSceneSleep,this),this.events.emit(I.WAKE,this)}onSoundComplete(e){this.events.emit(I.SOUND_COMPLETE,this,e.key),e.destroy()}playDownSound(){this.playSound(this.downSoundKey)}playPressedSound(){this.playSound(this.pressedSoundKey)}playSound(e){if(!e)return;const t=this.scene.sound.add(e);t.once(p().Sound.Events.COMPLETE,this.onSoundComplete,this),t.play()}resetCursorIfOverOrDown(){if(this.isOver||this.isDown){const e=this.scene.input.manager;e.canvas.style.cursor=e.defaultCursor}}updateAfterDisable(){this.resetCursorIfOverOrDown(),this._isDown=!1,this._isOver=!1,this.updateButtonImage()}updateAfterEnabled(){const e=this.scene.input,t=e.hitTestPointer(e.activePointer);this._isOver=t.indexOf(this.gameObject)>-1,this.updateButtonImage()}updateAfterNonVisible(){this.resetCursorIfOverOrDown(),this._isDown=!1,this._isOver=!1,this.updateCapturedStatesAfterOff(),this.scene&&this.scene.input.off(p().Input.Events.POINTER_UP,this.onScenePointerUp,this),this.gameObject&&this.gameObject.removeInteractive()}updateAfterVisible(){this.gameObject&&(this.gameObject.setInteractive(this.inputConfig),this.enabled?this.scene.input.hitTestPointer(this.scene.input.activePointer).indexOf(this.gameObject)>-1&&this.handleInputOver():this.enabled=!1)}updateCapturedStatesAfterOff(){if(N.capturedButton===this){N.capturedButton=null;const e=N.overNonCapturedButton;e&&(N.overNonCapturedButton=null,e.handleInputOver())}else N.overNonCapturedButton===this&&(N.overNonCapturedButton=null)}updateSceneEnabled(){if(!this.isVisibleChain)return;const e=this.scene?this.scene.input:null;e&&this.wasSceneInputEnabled!==e.enabled&&(this.wasSceneInputEnabled=e.enabled,this.wasSceneInputEnabled?this.updateAfterEnabled():this.updateAfterDisable())}updatePostInit(){this.updateVisibility(),this.updateSceneEnabled()}updatePreInit(){this.init()}updateVisibility(){const e=this.isVisibleChain();this.lastIsVisible!==e&&(this.lastIsVisible=e,this.lastIsVisible?this.updateAfterVisible():this.updateAfterNonVisible())}}N.WAIT_ITEM_TYPE="buttonComponent",N.DEFAULT_DOUBLE_PRESS_MAX_TIME=350,N.DEFAULT_DOUBLE_PRESS_SIZE=2;const x=N;class P extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"right_carousel_00.png"),this.setOrigin(0,0)}}class D extends p().GameObjects.Container{constructor(e,t,i){super(e,null!=t?t:0,null!=i?i:0),this.isStart=!1;const s=e.add.image(0,0,"comfy-spritesheet","bg_timer.png");s.setOrigin(0,0),this.add(s);const a=e.add.image(10,24,"comfy-spritesheet","seek.png");a.setOrigin(.5,1),this.add(a),this.seeker=a}start(){this.timedEvent=this.scene.time.addEvent({delay:1e3,callback:this.onEvent,callbackScope:this,timeScale:8,loop:!0}),this.isStart=!0}stop(){this.isStart=!1,this.seeker.x=5}pause(){this.timedEvent.paused=!0,this.isStart=!1}resume(){this.timedEvent.paused=!1,this.isStart=!0}reset(){this.seeker.x=5}onEvent(e){}update(){this.isStart&&(this.seeker.x+=this.timedEvent.getProgress()/5,this.seeker.x>40&&(this.seeker.x=5,this.emit("reset")))}}class F extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"alarm_light.png"),this.setOrigin(0,0)}}class L extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"desk_star_00.png"),this.setOrigin(0,0)}}class H extends p().GameObjects.Container{constructor(e,t,i){super(e,null!=t?t:0,null!=i?i:0),this.carouselCenterLeft=[];const s=e.add.sprite(0,0,"comfy-spritesheet","center_l_carousel_00.png");s.setOrigin(0,0),this.add(s);const a=e.add.sprite(100,0,"comfy-spritesheet","center_l_carousel_00.png");a.setOrigin(0,0),this.add(a);const r=e.add.sprite(200,0,"comfy-spritesheet","center_l_carousel_00.png");r.setOrigin(0,0),this.add(r);const n=e.add.sprite(300,0,"comfy-spritesheet","center_l_carousel_00.png");n.setOrigin(0,0),this.add(n);const o=e.add.sprite(400,0,"comfy-spritesheet","center_l_carousel_00.png");o.setOrigin(0,0),this.add(o);const h=e.add.sprite(500,0,"comfy-spritesheet","center_l_carousel_00.png");h.setOrigin(0,0),this.add(h);const l=new L(e,663,7);this.add(l);const c=e.add.sprite(600,0,"comfy-spritesheet","center_r_carousel_00.png");c.setOrigin(0,0),this.add(c),this.carouselOne=s,this.carouselTwo=a,this.carouselThree=r,this.carouselFour=n,this.carouselFive=o,this.carouselSix=h,this.desk=l,this.carouselCenterRight=c,this.carouselCenterLeft.push(this.carouselOne),this.carouselCenterLeft.push(this.carouselTwo),this.carouselCenterLeft.push(this.carouselThree),this.carouselCenterLeft.push(this.carouselFour),this.carouselCenterLeft.push(this.carouselFive),this.carouselCenterLeft.push(this.carouselSix),this.scene.events.once(p().Scenes.Events.UPDATE,this.start,this),this.scene.events.on(p().Scenes.Events.UPDATE,this.update,this)}start(){}update(e,t){}playNext(){this.carouselCenterRight.play("center-right-animation",!0);for(let e=0;e<this.carouselCenterLeft.length;e++)this.carouselCenterLeft[e].play("center-left-animation",!0)}playPrev(){this.carouselCenterRight.playReverse("center-right-animation",!0);for(let e=0;e<this.carouselCenterLeft.length;e++)this.carouselCenterLeft[e].playReverse("center-left-animation",!0)}openDesk(){this.scene.add.tween({targets:this.desk,x:"-=124",duration:200,yoyo:!0})}}class M extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"trash_09.png"),this.setOrigin(.5,0)}}class B extends p().GameObjects.Container{constructor(e,t,i){super(e,null!=t?t:0,null!=i?i:0);const s=e.add.image(0,0,"comfy-spritesheet","frame_tv.png");s.setOrigin(0,0),this.add(s);const a=e.add.image(62,85,"comfy-spritesheet","screen_tv.png");this.add(a);const r=e.add.container(65,132);r.scaleX=.8,r.scaleY=.8,this.add(r),this.modelContainer=r}createImage(e){let t,i,l,c,d,p=0;for(let m=0;m<e.features.length;m++)null!=e.features[0]&&(e.features[0]==o.CIRCLE?e.features[m]==s.BROWN?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","brown_circle_06.png"),this.modelContainer.add(t)):e.features[m]==s.PINK?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","pink_circle_06.png"),this.modelContainer.add(t)):e.features[m]==s.YELLOW?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","yellow_circle_06.png"),this.modelContainer.add(t)):e.features[m]==r.RED?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","red_ribbon_circle.png"),this.modelContainer.add(c)):e.features[m]==r.GREEN?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","green_ribbon_circle.png"),this.modelContainer.add(c)):e.features[m]==r.WHITE?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","white_ribbon_circle.png"),this.modelContainer.add(c)):e.features[m]==a.BROWN?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","brown_cream_circle.png"),this.modelContainer.add(i)):e.features[m]==a.PINK?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","pink_cream_circle.png"),this.modelContainer.add(i)):e.features[m]==a.YELLOW?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","yellow_cream_circle.png"),this.modelContainer.add(i)):e.features[m]==n.BUTTONS?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","buttons_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.EMOTICON?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.HEART?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","heart_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.LEAF?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","leaf_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==h.BURN?e.features[m-2]==a.BROWN?i.setFrame("brown_burn_circle.png"):e.features[m-2]==a.PINK?i.setFrame("pink_burn_circle.png"):e.features[m-2]==a.YELLOW&&i.setFrame("yellow_burn_circle.png"):e.features[m]==h.SPICE&&(p+=b.getPadding(e.features[m]),d=this.scene.add.image(0,-20+p,"comfy-spritesheet","spice_circle.png"),this.modelContainer.add(d)):e.features[0]==o.HEART?e.features[m]==s.BROWN?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","brown_heart_06.png"),this.modelContainer.add(t)):e.features[m]==s.PINK?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","pink_heart_06.png"),this.modelContainer.add(t)):e.features[m]==s.YELLOW?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","yellow_heart_06.png"),this.modelContainer.add(t)):e.features[m]==r.RED?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","red_ribbon_heart.png"),this.modelContainer.add(c)):e.features[m]==r.GREEN?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","green_ribbon_heart.png"),this.modelContainer.add(c)):e.features[m]==r.WHITE?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","white_ribbon_heart.png"),this.modelContainer.add(c)):e.features[m]==a.BROWN?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","brown_cream_heart.png"),this.modelContainer.add(i)):e.features[m]==a.PINK?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","pink_cream_heart.png"),this.modelContainer.add(i)):e.features[m]==a.YELLOW?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","yellow_cream_heart.png"),this.modelContainer.add(i)):e.features[m]==n.BUTTONS?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","buttons_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.EMOTICON?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.HEART?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","heart_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.LEAF?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","leaf_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==h.BURN?e.features[m-2]==a.BROWN?i.setFrame("brown_burn_heart.png"):e.features[m-2]==a.PINK?i.setFrame("pink_burn_heart.png"):e.features[m-2]==a.YELLOW&&i.setFrame("yellow_burn_heart.png"):e.features[m]==h.SPICE&&(p+=b.getPadding(e.features[m]),d=this.scene.add.image(0,-20+p,"comfy-spritesheet","spice_heart.png"),this.modelContainer.add(d)):e.features[0]==o.SQUARE&&(e.features[m]==s.BROWN?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","brown_square_06.png"),this.modelContainer.add(t)):e.features[m]==s.PINK?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","pink_square_06.png"),this.modelContainer.add(t)):e.features[m]==s.YELLOW?(p+=b.getPadding(e.features[m]),t=this.scene.add.image(0,-5+p,"comfy-spritesheet","yellow_square_06.png"),this.modelContainer.add(t)):e.features[m]==r.RED?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","red_ribbon_square.png"),this.modelContainer.add(c)):e.features[m]==r.GREEN?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","green_ribbon_square.png"),this.modelContainer.add(c)):e.features[m]==r.WHITE?(p+=b.getPadding(e.features[m]),c=this.scene.add.image(0,-15+p,"comfy-spritesheet","white_ribbon_square.png"),this.modelContainer.add(c)):e.features[m]==a.BROWN?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","brown_cream_square.png"),this.modelContainer.add(i)):e.features[m]==a.PINK?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","pink_cream_square.png"),this.modelContainer.add(i)):e.features[m]==a.YELLOW?(p+=b.getPadding(e.features[m]),i=this.scene.add.image(0,-15+p,"comfy-spritesheet","yellow_cream_square.png"),this.modelContainer.add(i)):e.features[m]==n.BUTTONS?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","buttons_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.EMOTICON?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.HEART?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","heart_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==n.LEAF?(p+=b.getPadding(e.features[m]),l=this.scene.add.image(0,p-20,"comfy-spritesheet","leaf_icon.png").setOrigin(.5),this.modelContainer.add(l)):e.features[m]==h.BURN?e.features[m-2]==a.BROWN?i.setFrame("brown_burn_square.png"):e.features[m-2]==a.PINK?i.setFrame("pink_burn_square.png"):e.features[m-2]==a.YELLOW&&i.setFrame("yellow_burn_square.png"):e.features[m]==h.SPICE&&(p+=b.getPadding(e.features[m]),d=this.scene.add.image(0,-20+p,"comfy-spritesheet","spice_square.png"),this.modelContainer.add(d))))}clearChild(){this.modelContainer.removeAll(!0)}}class W extends p().GameObjects.Image{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"bullet_icon.png"),this.setOrigin(0,0)}}class U extends p().GameObjects.Container{constructor(e,t,i){super(e,null!=t?t:0,null!=i?i:0),this.current=0,this.bullets=[];const s=e.add.image(0,0,"comfy-spritesheet","result_tv.png");s.setOrigin(0,0),this.add(s);const a=new W(e,14,22);a.visible=!1,this.add(a);const r=new W(e,35,22);r.visible=!1,this.add(r);const n=new W(e,56,22);n.visible=!1,this.add(n);const o=new W(e,77,22);o.visible=!1,this.add(o);const h=new W(e,14,42.5);h.visible=!1,this.add(h);const l=new W(e,35,42.5);l.visible=!1,this.add(l);const c=e.add.sprite(52,39,"comfy-spritesheet","tran_00.png");c.visible=!1,this.add(c),this.bulletOne=a,this.bulletTwo=r,this.bulletThree=n,this.bulletFour=o,this.bulletFive=h,this.bulletSix=l,this.tran=c,this.bullets.push(this.bulletOne),this.bullets.push(this.bulletTwo),this.bullets.push(this.bulletThree),this.bullets.push(this.bulletFour),this.bullets.push(this.bulletFive),this.bullets.push(this.bulletSix)}start(){for(let e=0;e<this.bullets.length;e++)this.bullets[e].visible=!1,this.bullets[e].setFrame("bullet_icon.png")}cakeNum(e){if(!(e>this.bullets.length))for(let t=0;t<e;t++)this.bullets[t].visible=!0}setStatusAt(e,t){let i=t?"pass_icon.png":"x_icon.png";this.bullets[e].setFrame(i),t||(this.bullets[e].alpha=0,this.scene.add.tween({targets:this.bullets[e],alpha:1,repeat:2,duration:200,onComplete:()=>{this.bullets[e].setFrame("bullet_icon.png")}}))}update(e,t){}}class Y extends p().GameObjects.Container{constructor(e,t,i){super(e,null!=t?t:-12,null!=i?i:-96);const s=e.add.sprite(-11,79,"comfy-spritesheet","leg_left.png");this.add(s);const a=e.add.sprite(16,-6,"comfy-spritesheet","face.png");this.add(a);const r=e.add.sprite(16,-75,"comfy-spritesheet","head.png");this.add(r);const n=e.add.sprite(-18,-9,"comfy-spritesheet","eye_left_03.png");this.add(n);const o=e.add.sprite(42,-9,"comfy-spritesheet","eye_right_00.png");this.add(o);const h=e.add.sprite(19,58,"comfy-spritesheet","body.png");this.add(h);const l=e.add.sprite(41,79,"comfy-spritesheet","leg_right.png");this.add(l);const c=e.add.sprite(48,55,"comfy-spritesheet","hand_right.png");this.add(c);const d=e.add.sprite(-17,44,"comfy-spritesheet","hand_left.png");this.add(d);const p=e.add.sprite(15,25,"comfy-spritesheet","mouth_00.png");this.add(p);const m=e.add.sprite(12,-1,"comfy-spritesheet","noice.png");this.add(m);const u=e.add.sprite(-13,-28,"comfy-spritesheet","eyesbrown_left.png");this.add(u);const g=e.add.sprite(45,-25,"comfy-spritesheet","eyesbrown_right.png");this.add(g);const f=e.add.sprite(-12,12,"comfy-spritesheet","mustache_left.png");this.add(f);const y=e.add.sprite(44,13,"comfy-spritesheet","mustache_right.png");this.add(y),this.eyeLeft=n,this.eyeRight=o,this.mouth=p,setInterval((()=>{this.blink(1)}),3e3)}talk(e){this.mouth.play({key:"talk-animation",repeat:e})}blink(e){this.visible&&(this.eyeLeft&&this.eyeLeft.play({key:"eyeleft-animation",repeat:e}),this.eyeRight&&this.eyeRight.play({key:"eyeright-animation",repeat:e}))}}class j extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"burn_00.png"),this.setOrigin(.5,0)}}class G extends p().GameObjects.Image{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"flour_spot.png"),this.setOrigin(.5,0)}}class V extends p().GameObjects.Image{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"ribbon_spot.png"),this.setOrigin(.5,0)}}class X extends p().GameObjects.Sprite{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"cream_spot_00.png"),this.setOrigin(.5,0)}}class q extends p().GameObjects.Image{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:0,s||"comfy-spritesheet",null!=a?a:"icon_spot.png"),this.setOrigin(.5,0)}}class K extends p().GameObjects.Image{constructor(e,t,i,s,a){super(e,null!=t?t:0,null!=i?i:1,s||"comfy-spritesheet",null!=a?a:"frame_spot.png"),this.setOrigin(.5,0)}}class Q extends p().Scene{constructor(){super("PlayScene"),this.startPut=!1,this.cakes=[],this.failedCakeNum=0,this.prevStepNum=0,this.isMaking=!1}editorCreate(){const e=this.add.image(0,0,"canvasIcon");e.visible=!1,this.add.image(400,248,"bg");const t=new k(this,0,19);this.add.existing(t);const i=this.add.image(278,433,"comfy-spritesheet","oval_blur.png");i.visible=!1;const s=this.add.image(203,433,"comfy-spritesheet","left_normal.png"),a=this.add.image(278,433,"comfy-spritesheet","right_normal.png"),r=new P(this,698,30);this.add.existing(r);const n=new D(this,7,339);this.add.existing(n);const o=new F(this,17,304);this.add.existing(o);const h=this.add.image(89,333,"comfy-spritesheet","cirle_frame_normal.png");h.setOrigin(0,0);const l=this.add.image(89,370,"comfy-spritesheet","square_frame_normal.png");l.setOrigin(0,0);const c=this.add.image(89,296,"comfy-spritesheet","heart_frame_normal.png");c.setOrigin(0,0);const d=new H(this,0,220);this.add.existing(d);const p=this.add.image(188,297,"comfy-spritesheet","brown_bin_normal.png");p.setOrigin(0,0);const m=this.add.image(188,334,"comfy-spritesheet","pink_bin_normal.png");m.setOrigin(0,0);const u=new L(this,677,222);this.add.existing(u),u.visible=!1;const g=new M(this,726,164);this.add.existing(g);const f=this.add.image(188,371,"comfy-spritesheet","yellow_bin_normal.png");f.setOrigin(0,0);const y=this.add.image(290.6666666666667,297,"comfy-spritesheet","red_ribbon_normal.png");y.setOrigin(0,0);const b=this.add.image(290.6666666666667,371,"comfy-spritesheet","green_ribbon_normal.png");b.setOrigin(0,0);const E=this.add.image(290.6666666666667,334,"comfy-spritesheet","white_ribbon_noraml.png");E.setOrigin(0,0);const S=this.add.image(388,297,"comfy-spritesheet","brown_cream_normal.png");S.setOrigin(0,0);const _=this.add.image(388,334,"comfy-spritesheet","pink_frame_normal.png");_.setOrigin(0,0);const v=this.add.image(388,371,"comfy-spritesheet","yellow_cream_normal.png");v.setOrigin(0,0);const C=this.add.image(499,340,"comfy-spritesheet","three_icons_normal.png"),R=this.add.image(536,340,"comfy-spritesheet","heart_icon_normal.png"),w=this.add.image(538,375,"comfy-spritesheet","emoticon_normal.png"),T=this.add.image(500,375,"comfy-spritesheet","leaf_normal.png"),A=this.add.image(613,326,"comfy-spritesheet","burn_normal.png"),I=this.add.image(614,380,"comfy-spritesheet","spice_normal.png"),N=this.add.sprite(729,215,"comfy-spritesheet","box_moving_00.png");N.visible=!1;const W=this.add.sprite(737,138,"comfy-spritesheet","hand_in_15.png");W.visible=!1;const Q=new B(this,0,0);this.add.existing(Q);const z=new U(this,685,6);this.add.existing(z);const J=new Y(this,1086,378);this.add.existing(J);const Z=this.add.image(516,349,"comfy-spritesheet","rectangle_blur.png");Z.visible=!1;const $=this.add.image(63,85,"comfy-spritesheet","square_blur.png");$.visible=!1;const ee=new j(this,624,0);this.add.existing(ee);const te=new G(this,224,0);this.add.existing(te);const ie=new V(this,324,0);this.add.existing(ie);const se=new X(this,424,0);this.add.existing(se);const ae=new q(this,524,0);this.add.existing(ae);const re=new K(this,124,0);this.add.existing(re),re.visible=!0,new O(e);const ne=new x(s);ne.normFrame={key:"comfy-spritesheet",frame:"left_normal.png"},ne.overFrame={key:"comfy-spritesheet",frame:"left_over.png"},ne.downFrame={key:"comfy-spritesheet",frame:"left_down.png"},ne.callback=this.playPrev,ne.context=this;const oe=new x(a);oe.normFrame={key:"comfy-spritesheet",frame:"right_normal.png"},oe.overFrame={key:"comfy-spritesheet",frame:"right_over.png"},oe.downFrame={key:"comfy-spritesheet",frame:"right_down.png"},oe.callback=this.playNext,oe.context=this;const he=new x(h);he.normFrame={key:"comfy-spritesheet",frame:"cirle_frame_normal.png"},he.overFrame={key:"comfy-spritesheet",frame:"cirle_frame_up.png"},he.downFrame={key:"comfy-spritesheet",frame:"cirle_frame_down.png"},he.callback=this.circle,he.context=this;const le=new x(l);le.normFrame={key:"comfy-spritesheet",frame:"square_frame_normal.png"},le.overFrame={key:"comfy-spritesheet",frame:"square_frame_up.png"},le.downFrame={key:"comfy-spritesheet",frame:"square_frame_down.png"},le.callback=this.square,le.context=this;const ce=new x(c);ce.normFrame={key:"comfy-spritesheet",frame:"heart_frame_normal.png"},ce.overFrame={key:"comfy-spritesheet",frame:"heart_frame_up.png"},ce.downFrame={key:"comfy-spritesheet",frame:"heart_frame_down.png"},ce.callback=this.heart,ce.context=this;const de=new x(p);de.normFrame={key:"comfy-spritesheet",frame:"brown_bin_normal.png"},de.overFrame={key:"comfy-spritesheet",frame:"brown_bin_up.png"},de.downFrame={key:"comfy-spritesheet",frame:"brown_bin_down.png"},de.callback=this.doBrownFlour,de.context=this;const pe=new x(m);pe.normFrame={key:"comfy-spritesheet",frame:"pink_bin_normal.png"},pe.overFrame={key:"comfy-spritesheet",frame:"pink_bin_up.png"},pe.downFrame={key:"comfy-spritesheet",frame:"pink_bin_down.png"},pe.callback=this.doPinkFlour,pe.context=this;const me=new x(f);me.normFrame={key:"comfy-spritesheet",frame:"yellow_bin_normal.png"},me.overFrame={key:"comfy-spritesheet",frame:"yellow_bin_up.png"},me.downFrame={key:"comfy-spritesheet",frame:"yellow_bin_down.png"},me.callback=this.doYellowFlour,me.context=this;const ue=new x(y);ue.normFrame={key:"comfy-spritesheet",frame:"red_ribbon_normal.png"},ue.overFrame={key:"comfy-spritesheet",frame:"red_ribbon_up.png"},ue.downFrame={key:"comfy-spritesheet",frame:"red_ribbon_down.png"},ue.callback=this.doRedRibbon,ue.context=this;const ge=new x(b);ge.normFrame={key:"comfy-spritesheet",frame:"green_ribbon_normal.png"},ge.overFrame={key:"comfy-spritesheet",frame:"green_ribbon_over.png"},ge.downFrame={key:"comfy-spritesheet",frame:"green_ribbon_down.png"},ge.callback=this.doGreenRibbon,ge.context=this;const fe=new x(E);fe.normFrame={key:"comfy-spritesheet",frame:"white_ribbon_noraml.png"},fe.overFrame={key:"comfy-spritesheet",frame:"white_ribbon_up.png"},fe.downFrame={key:"comfy-spritesheet",frame:"white_ribbon_down.png"},fe.callback=this.doWhiteRibbon,fe.context=this;const ye=new x(S);ye.normFrame={key:"comfy-spritesheet",frame:"brown_cream_normal.png"},ye.overFrame={key:"comfy-spritesheet",frame:"brown_cream_up.png"},ye.downFrame={key:"comfy-spritesheet",frame:"brown_cream_down.png"},ye.callback=this.doBrownCream,ye.context=this;const be=new x(_);be.normFrame={key:"comfy-spritesheet",frame:"pink_frame_normal.png"},be.overFrame={key:"comfy-spritesheet",frame:"pink_frame_up.png"},be.downFrame={key:"comfy-spritesheet",frame:"pink_frame_down.png"},be.callback=this.doPinkCream,be.context=this;const Ee=new x(v);Ee.normFrame={key:"comfy-spritesheet",frame:"yellow_cream_normal.png"},Ee.overFrame={key:"comfy-spritesheet",frame:"yellow_cream_up.png"},Ee.downFrame={key:"comfy-spritesheet",frame:"yellow_cream_down.png"},Ee.callback=this.doYellowCream,Ee.context=this;const Se=new x(C);Se.normFrame={key:"comfy-spritesheet",frame:"three_icons_normal.png"},Se.overFrame={key:"comfy-spritesheet",frame:"three_icons_up.png"},Se.downFrame={key:"comfy-spritesheet",frame:"three_icons_down.png"},Se.callback=this.doButtonsIcon,Se.context=this;const _e=new x(R);_e.normFrame={key:"comfy-spritesheet",frame:"heart_icon_normal.png"},_e.overFrame={key:"comfy-spritesheet",frame:"heart_icon_up.png"},_e.downFrame={key:"comfy-spritesheet",frame:"heart_icon_down.png"},_e.callback=this.doHeartIcon,_e.context=this;const ve=new x(w);ve.normFrame={key:"comfy-spritesheet",frame:"emoticon_normal.png"},ve.overFrame={key:"comfy-spritesheet",frame:"emoticon_up.png"},ve.downFrame={key:"comfy-spritesheet",frame:"emoticon_down.png"},ve.callback=this.doEmoticon,ve.context=this;const Oe=new x(T);Oe.normFrame={key:"comfy-spritesheet",frame:"leaf_normal.png"},Oe.overFrame={key:"comfy-spritesheet",frame:"leaf_up.png"},Oe.downFrame={key:"comfy-spritesheet",frame:"leaf_down.png"},Oe.callback=this.doLeafIcon,Oe.context=this;const ke=new x(A);ke.normFrame={key:"comfy-spritesheet",frame:"burn_normal.png"},ke.overFrame={key:"comfy-spritesheet",frame:"burn_up.png"},ke.downFrame={key:"comfy-spritesheet",frame:"burn_down.png"},ke.callback=this.doBurn,ke.context=this;const Ce=new x(I);Ce.normFrame={key:"comfy-spritesheet",frame:"spice_normal.png"},Ce.overFrame={key:"comfy-spritesheet",frame:"spice_up.png"},Ce.downFrame={key:"comfy-spritesheet",frame:"spice_down.png"},Ce.callback=this.doSpice,Ce.context=this,this.leftCarousel=t,this.buttonHightlight=i,this.leftBtn=s,this.rightBtn=a,this.rightCarousel=r,this.timer=n,this.alarmLight=o,this.circleFrame=h,this.squareFrame=l,this.heartFrame=c,this.centerLeftCarousel=d,this.brownFlour=p,this.pinkFlour=m,this.trash=g,this.yellowFlour=f,this.redRibbon=y,this.greenRibbon=b,this.whiteRibbon=E,this.brownCream=S,this.pinkCream=_,this.yellowCream=v,this.buttonsIcon=C,this.heartIcon=R,this.emoticon=w,this.leafIcon=T,this.burn=A,this.spice=I,this.box=N,this.hand=W,this.targetScreen=Q,this.resultScreen=z,this.character=J,this.controlHightlight=Z,this.targetHightlight=$,this.tasteSpot=ee,this.flourSpot=te,this.ribbonSpot=ie,this.creamSpot=se,this.decorateSpot=ae,this.frameSpot=re,this.events.emit("scene-awake")}create(){this.editorCreate(),g.setCurrentScene(this),this.cakeNum=0,this.cakes=[],this.failedCakeNum=0,this.isMaking=!1,this.createControl(),this.createInitCake(),this.charX=this.character.x,this.showChar()}showChar(){this.add.tween({targets:this.character,x:700,duration:200,ease:p().Math.Easing.Elastic.InOut,onComplete:()=>{this.character.talk(5),this.character.blink(3),this.hideChar()}})}hideChar(){this.add.tween({targets:this.character,x:this.charX,duration:200,ease:p().Math.Easing.Elastic.InOut,delay:2e3})}playPrev(){if(!this.isMaking){if(1==this.cakes.length&&this.getCakeByPos(this.frameSpot)&&!this.isExistMakingCake())return this.hightlight(this.targetHightlight),this.controlHightlight.x=this.frameSpot.x-12,void this.hightlight(this.controlHightlight);for(let e=this.cakes.length-1;e>=0;e--)this.movePrev(this.cakes[e],e)}}moveNext(e){e.y<247?(this.isMaking=!0,this.add.tween({targets:e,x:"-=30",y:"+=63",duration:200,onComplete:()=>{this.isMaking=!1}}),this.leftCarousel.play("left-animation",!0),this.centerLeftCarousel.playNext()):(this.isMaking=!0,this.add.tween({targets:e,x:"+=100",duration:200,onComplete:()=>{this.isMaking=!1}}),this.leftCarousel.play("left-animation",!0),this.centerLeftCarousel.playNext())}movePrev(e,t){if(e.x>24){if(e.y>=247&&this.canMove(e.x-100,e.y)&&t>=0){this.isMaking=!0;for(let e=t;e>=0;e--)this.add.tween({targets:this.cakes[e],x:"-=100",duration:200,onComplete:()=>{0==e&&(this.isMaking=!1)}});u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.prevStepNum++,3==this.prevStepNum&&(this.canMove(84,121)&&this.addCake(),this.prevStepNum=0),this.timer.reset())}this.leftCarousel.playReverse("left-animation",!0),this.centerLeftCarousel.playPrev()}else if(24==e.x){if(e.y>148&&this.canMove(e.x+30,e.y-63)){this.isMaking=!0,this.add.tween({targets:e,x:"+=30",y:"-=63",duration:200});for(let e=t-1;e>=0;e--)this.add.tween({targets:this.cakes[e],x:"-=100",duration:200,onComplete:()=>{0==e&&(this.isMaking=!1)}});u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.prevStepNum++,3==this.prevStepNum&&(this.canMove(84,121)&&this.addCake(),this.prevStepNum=0),this.timer.reset())}this.leftCarousel.playReverse("left-animation",!0),this.centerLeftCarousel.playPrev()}}playNext(){if(!this.isMaking){if(1==this.cakes.length&&this.getCakeByPos(this.frameSpot)&&!this.isExistMakingCake())return this.hightlight(this.targetHightlight),this.controlHightlight.x=this.frameSpot.x-12,void this.hightlight(this.controlHightlight);for(let e=0;e<this.cakes.length;e++)if(this.cakes[e].x>this.decorateSpot.x)if(u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||this.canMove(84,121)&&this.addCake(),this.checkResult(this.cakes[e]))this.resultScreen.setStatusAt(this.cakeNum,!0),this.add.tween({targets:this.cakes[e],x:"+=110",duration:200,onComplete:()=>{this.hand.visible=!0,this.hand.play("hand-in-animation"),setTimeout((()=>{this.cakes[e].destroy(),this.cakes.splice(e,1)}),500),this.hand.on("animationcomplete",(()=>{if(this.rightCarousel.play("right-animation"),u.level==c.EASY){let e=this.createNewCake();e.visible=!1,this.box.visible=!0,this.hand.off("animationcomplete"),this.add.tween({targets:this.box,x:"+=150",y:"-=250",duration:3e3,onComplete:()=>{this.box.visible=!1,this.box.x=this.initX,this.box.y=this.initY,e.visible=!0,this.add.tween({targets:e,x:24,y:247,duration:200,onComplete:()=>{this.centerLeftCarousel.playNext(),this.add.tween({targets:e,x:"+=200",duration:800,onComplete:()=>{if(4==this.cakeNum){this.resultScreen.tran.visible=!0,this.resultScreen.tran.play("tran-animation");const e={Result:"win",FailCount:this.failedCakeNum};return window.parent.postMessage(e,"*"),void(this.cakeNum=0)}this.cakeNum++}})}})}})}else this.box.visible=!0,this.hand.off("animationcomplete"),this.add.tween({targets:this.box,x:"+=150",y:"-=250",duration:3e3,onComplete:()=>{if(this.box.visible=!1,this.box.x=this.initX,this.box.y=this.initY,5==this.cakeNum){const e={Result:"win",FailCount:this.failedCakeNum};return window.parent.postMessage(e,"*"),this.timer.visible&&this.timer.stop(),void(this.cakeNum=0)}this.cakeNum++}})}))}});else{if(this.failedCakeNum++,this.failedCakeNum>=3){const e={Result:"lose",FailCount:this.failedCakeNum};window.parent.postMessage(e,"*"),this.failedCakeNum=0,this.timer.visible&&this.timer.stop()}this.alarmLight.play("alarm-animation"),this.resultScreen.setStatusAt(this.cakeNum,!1),this.add.tween({targets:this.cakes[e],x:"+=110",duration:200,onComplete:()=>{this.centerLeftCarousel.openDesk(),this.trash.play("open-animation"),this.add.tween({targets:this.cakes[e],y:"+=100",duration:200,onComplete:()=>{if(this.cakes[e].destroy(),this.cakes.splice(e,1),u.level==c.EASY){let e=this.createNewCake();e.visible=!0,this.add.tween({targets:e,x:24,y:247,duration:200,onComplete:()=>{this.centerLeftCarousel.playNext(),this.add.tween({targets:e,x:"+=200",duration:800,onComplete:()=>{}})}})}}})}})}else this.moveNext(this.cakes[e]);u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||this.timer.reset()}}checkResult(e){let t=!1;return t=e.features.length==this.model.features.length&&e.features.every(((e,t)=>e===this.model.features[t])),t}createControl(){switch(u.level){case c.EASY:this.frameSpot.x=this.flourSpot.x,this.heartFrame.x=this.brownFlour.x,this.circleFrame.x=this.pinkFlour.x,this.squareFrame.x=this.yellowFlour.x,this.flourSpot.x=this.ribbonSpot.x,this.brownFlour.x=this.redRibbon.x,this.pinkFlour.x=this.whiteRibbon.x,this.yellowFlour.x=this.greenRibbon.x,this.hideRibbonControl(),this.hideTasteControl(),this.hideTimerControl(),this.resultScreen.cakeNum(5);break;case c.INTERMEDIATE:this.hideTasteControl(),this.resultScreen.cakeNum(5);break;case c.ADVANCED:this.resultScreen.cakeNum(6)}this.flourSpot.setDepth(2),this.creamSpot.setDepth(2),this.frameSpot.setDepth(2),this.targetHightlight.setDepth(2)}initCake(){let e=new y(this,this.frameSpot.x,this.frameSpot.y);return e.x=this.frameSpot.x,e.y=247,this.cakes.push(e),e}addCake(){let e=new y(this,this.frameSpot.x,this.frameSpot.y);return e.x=84,e.y=121,this.cakes.push(e),e}createInitCake(){let e=this.initCake();return this.model=new f(u.level),this.targetScreen.clearChild(),this.targetScreen.createImage(this.model),this.targetScreen.setDepth(1),e.setDepth(this.targetScreen.depth-1),this.initX=this.box.x,this.initY=this.box.y,e}createNewCake(){let e=this.addCake();return this.model=new f(u.level),this.targetScreen.clearChild(),this.targetScreen.createImage(this.model),this.targetScreen.setDepth(1),e.setDepth(this.targetScreen.depth-1),this.initX=this.box.x,this.initY=this.box.y,e}showTimerControl(){this.alarmLight.visible=!0,this.timer.visible=!0}hideTimerControl(){this.alarmLight.visible=!1,this.timer.visible=!1}showFrameControl(){this.frameSpot.visible=!0,this.heartFrame.visible=!0,this.circleFrame.visible=!0,this.squareFrame.visible=!0}hideFrameControl(){this.frameSpot.visible=!1,this.heartFrame.visible=!1,this.circleFrame.visible=!1,this.squareFrame.visible=!1}showFlourControl(){this.flourSpot.visible=!0,this.brownFlour.visible=!0,this.pinkFlour.visible=!0,this.yellowFlour.visible=!0}hideFlourControl(){this.flourSpot.visible=!1,this.brownFlour.visible=!1,this.pinkFlour.visible=!1,this.yellowFlour.visible=!1}showRibbonControl(){this.ribbonSpot.visible=!0,this.redRibbon.visible=!0,this.whiteRibbon.visible=!0,this.greenRibbon.visible=!0}hideRibbonControl(){this.ribbonSpot.visible=!1,this.redRibbon.visible=!1,this.whiteRibbon.visible=!1,this.greenRibbon.visible=!1}showCreamControl(){this.creamSpot.visible=!0,this.brownCream.visible=!0,this.pinkCream.visible=!0,this.yellowCream.visible=!0}hideCreamControl(){this.creamSpot.visible=!1,this.brownCream.visible=!1,this.pinkCream.visible=!1,this.yellowCream.visible=!1}showDecorateControl(){this.decorateSpot.visible=!0,this.buttonsIcon.visible=!0,this.leafIcon.visible=!0,this.heartIcon.visible=!0,this.emoticon.visible=!0}hideDecorateControl(){this.decorateSpot.visible=!1,this.buttonsIcon.visible=!1,this.leafIcon.visible=!1,this.heartIcon.visible=!1,this.emoticon.visible=!1}showTasteControl(){this.tasteSpot.visible=!0,this.burn.visible=!0,this.spice.visible=!0}hideTasteControl(){this.tasteSpot.visible=!1,this.burn.visible=!1,this.spice.visible=!1}circle(){if(this.isMaking)return;let e,t,i=this.getCakeByPos(this.frameSpot);if(!i)return this.shake(this.frameSpot),void this.hightlight(this.buttonHightlight);if(this.getFrameNum(i.features)>=3)return void this.hightlight(this.buttonHightlight);this.isMaking=!0;let s=this.getEnd(i.features);t=b.calPaddingY(i.features),!(this.isExistMakingCake||this.cakes.length>1)||u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.timer.start(),this.timer.on("reset",this.playNext,this)),s==o.CIRCLE||s==o.HEART||s==o.SQUARE?(e=i.last,this.add.tween({targets:e,y:-this.frameSpot.y-this.frameSpot.displayHeight,scaleX:.3,scaleY:.3,duration:200,onComplete:()=>{i.remove(e),e.removedFromScene(),e.destroy(),e=null,i.features.pop(),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","circle_00.png").setOrigin(.5),e.scaleX=e.scaleY=.3,this.add.tween({targets:e,y:i.y+10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("circle-frame-animation",!0),e.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),this.isMaking=!1,i.add(e),e.x=0,e.y=t+10,i.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.CIRCLE&&this.hightlight(this.targetHightlight)})),i.features.push(o.CIRCLE)},callbackScope:this})}})):(e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","circle_00.png").setOrigin(.5),e.scaleX=e.scaleY=.3,this.timer.visible&&this.timer.pause(),this.add.tween({targets:e,y:i.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("circle-frame-animation",!0),e.on("animationcomplete",(()=>{this.timer.visible&&this.timer.resume(),this.isMaking=!1,i.add(e),e.x=0,e.y=-10+t,i.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.CIRCLE&&this.hightlight(this.targetHightlight)})),i.features.push(o.CIRCLE)},callbackScope:this}))}square(){if(this.isMaking)return;let e,t,i=this.getCakeByPos(this.frameSpot);if(!i)return this.shake(this.frameSpot),void this.hightlight(this.buttonHightlight);if(this.getFrameNum(i.features)>=3)return void this.hightlight(this.buttonHightlight);this.isMaking=!0;let s=this.getEnd(i.features);if(t=b.calPaddingY(i.features),!(this.isExistMakingCake||this.cakes.length>1)||u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.timer.start(),this.timer.on("reset",this.playNext,this)),s==o.CIRCLE||s==o.HEART||s==o.SQUARE)e=i.last,this.add.tween({targets:e,y:-this.frameSpot.y-this.frameSpot.displayHeight,scaleX:.3,scaleY:.3,duration:200,onComplete:()=>{i.remove(e),e.removedFromScene(),e.destroy(),e=null,i.features.pop(),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","square_00.png"),e.scaleX=e.scaleY=.3,this.add.tween({targets:e,y:i.y+10+t,scaleX:1,scaleY:1,duration:200,onComplete:()=>{e.play("square-frame-animation",!0),e.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),i.add(e),e.x=0,e.y=10+t,i.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.SQUARE&&this.hightlight(this.targetHightlight)})),i.features.push(o.SQUARE)},callbackScope:this})}});else{let e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","square_00.png").setOrigin(.5);e.scaleX=e.scaleY=.3,this.timer.visible&&this.timer.pause(),this.add.tween({targets:e,y:i.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("square-frame-animation",!0),e.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),i.add(e),e.x=0,e.y=-10+t,i.tableCloth.setDepth(0),this.getStart(i.features)!=o.SQUARE&&this.hightlight(this.targetHightlight)})),i.features.push(o.SQUARE)},callbackScope:this})}}heart(){if(this.isMaking)return;let e,t,i=this.getCakeByPos(this.frameSpot);if(!i)return this.shake(this.frameSpot),void this.hightlight(this.buttonHightlight);if(this.getFrameNum(i.features)>=3)return void this.hightlight(this.buttonHightlight);this.isMaking=!0;let s=this.getEnd(i.features);t=b.calPaddingY(i.features),!(this.isExistMakingCake||this.cakes.length>1)||u.level!=c.INTERMEDIATE&&u.level!=c.ADVANCED||(this.timer.start(),this.timer.on("reset",this.playNext,this)),s==o.CIRCLE||s==o.HEART||s==o.SQUARE?(e=i.last,this.add.tween({targets:e,y:-this.frameSpot.y-this.frameSpot.displayHeight,scaleX:.4,scaleY:.4,duration:200,onComplete:()=>{i.remove(e),e.removedFromScene(),e.destroy(),e=null,i.features.pop(),e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","heart_00.png"),e.scaleX=e.scaleY=.4,this.add.tween({targets:e,y:i.y+10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("heart-frame-animation",!0),e.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),i.add(e),e.x=0,e.y=10+t,i.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.HEART&&this.hightlight(this.targetHightlight)})),i.features.push(o.HEART)},callbackScope:this})}})):(e=this.add.sprite(this.frameSpot.x,this.frameSpot.y+this.frameSpot.displayHeight,"comfy-spritesheet","heart_00.png").setOrigin(.5),e.scaleX=e.scaleY=.3,this.timer.visible&&this.timer.pause(),this.add.tween({targets:e,y:i.y-10+t,scaleX:.9,scaleY:.9,duration:200,onComplete:()=>{e.play("heart-frame-animation",!0),e.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),i.add(e),e.x=0,e.y=-10+t,i.tableCloth.setDepth(0),this.getStart(this.model.features)!=o.HEART&&this.hightlight(this.targetHightlight)})),i.features.push(o.HEART)},callbackScope:this}))}doBrownFlour(){if(this.isMaking)return;let e=this.getCakeByPos(this.flourSpot);if(!e)return this.shake(this.flourSpot),void this.hightlight(this.buttonHightlight);this.timer.visible&&this.timer.pause();let t=this.getEnd(e.features),i=b.calPaddingY(e.features);if(t==o.CIRCLE||t==o.HEART||t==o.SQUARE){let a=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","brown_flour_00.png").setOrigin(.5,0);a.setDepth(this.flourSpot.depth-1),a.play("brown-flour-animation",!0),a.on("animationcomplete",(()=>{a.removedFromScene(),a.destroy(),a.off("animationcomplete")}));let r=e.last,n=r.x,h=r.y;switch(t){case o.CIRCLE:r.play("brown-circle-animation",!0);break;case o.HEART:r.play("brown-heart-animation",!0);break;case o.SQUARE:r.play("brown-square-animation",!0)}r.on("animationcomplete",(()=>{r.x=n,r.y=h,e.features.push(s.BROWN),r.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()}))}else{if(t!=s.BROWN&&t!=s.PINK&&t!=s.YELLOW)return;{let a=this.getStart(e.features),r=e.last,n=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","brown_flour_00.png").setOrigin(.5,0);switch(n.setDepth(this.flourSpot.depth-1),t){case s.BROWN:n.playReverse("brown-flour-animation",!0);break;case s.PINK:n.playReverse("pink-flour-animation",!0);break;case s.YELLOW:n.playReverse("yellow-flour-animation",!0)}switch(a){case o.CIRCLE:r.setFrame("circle_00.png");break;case o.HEART:r.setFrame("heart_00.png");break;case o.SQUARE:r.setFrame("square_00.png")}e.features.pop(),n.on("animationcomplete",(()=>{n.removedFromScene(),n.destroy(),n.off("animationcomplete");let t=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","brown_flour_00.png").setOrigin(.5,0);switch(t.setDepth(this.flourSpot.depth-1),t.play("brown-flour-animation",!0),t.on("animationcomplete",(()=>{t.removedFromScene(),t.destroy(),t.off("animationcomplete"),this.timer.visible&&this.timer.resume()})),a){case o.CIRCLE:r.play("brown-circle-animation",!0);break;case o.HEART:r.play("brown-heart-animation",!0);break;case o.SQUARE:r.play("brown-square-animation",!0)}e.features.push(s.BROWN)}))}}}doPinkFlour(){if(this.isMaking)return;let e=this.getCakeByPos(this.flourSpot);if(!e)return this.shake(this.flourSpot),void this.hightlight(this.buttonHightlight);this.timer.visible&&this.timer.pause();let t=this.getEnd(e.features),i=b.calPaddingY(e.features);if(t==o.CIRCLE||t==o.HEART||t==o.SQUARE){let a=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","pink_flour_00.png").setOrigin(.5,0);a.setDepth(this.flourSpot.depth-1),a.play("pink-flour-animation",!0),a.on("animationcomplete",(()=>{a.removedFromScene(),a.destroy(),a.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()}));let r=e.last,n=r.x,h=r.y;switch(t){case o.CIRCLE:r.play("pink-circle-animation",!0);break;case o.HEART:r.play("pink-heart-animation",!0);break;case o.SQUARE:r.play("pink-square-animation",!0)}r.on("animationcomplete",(()=>{r.x=n,r.y=h,e.features.push(s.PINK),r.off("animationcomplete")}))}else{if(t!=s.BROWN&&t!=s.PINK&&t!=s.YELLOW)return;{let a=this.getStart(e.features),r=e.last,n=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","pink_flour_00.png").setOrigin(.5,0);switch(n.setDepth(this.flourSpot.depth-1),t){case s.BROWN:n.playReverse("brown-flour-animation",!0);break;case s.PINK:n.playReverse("pink-flour-animation",!0);break;case s.YELLOW:n.playReverse("yellow-flour-animation",!0)}switch(e.features.pop(),a){case o.CIRCLE:r.setFrame("circle_00.png");break;case o.HEART:r.setFrame("heart_00.png");break;case o.SQUARE:r.setFrame("square_00.png")}n.on("animationcomplete",(()=>{n.removedFromScene(),n.destroy(),n.off("animationcomplete");let t=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","pink_flour_00.png").setOrigin(.5,0);switch(t.setDepth(this.flourSpot.depth-1),t.play("pink-flour-animation",!0),t.on("animationcomplete",(()=>{t.removedFromScene(),t.destroy(),t.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()})),a){case o.CIRCLE:r.play("pink-circle-animation",!0);break;case o.HEART:r.play("pink-heart-animation",!0);break;case o.SQUARE:r.play("pink-square-animation",!0)}e.features.push(s.PINK)}))}}}doYellowFlour(){if(this.isMaking)return;let e=this.getCakeByPos(this.flourSpot);if(!e)return this.shake(this.flourSpot),void this.hightlight(this.buttonHightlight);this.timer.visible&&this.timer.pause();let t=this.getEnd(e.features),i=b.calPaddingY(e.features);if(t==o.CIRCLE||t==o.HEART||t==o.SQUARE){let a=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","yellow_flour_00.png").setOrigin(.5,0);a.setDepth(this.flourSpot.depth-1),a.play("yellow-flour-animation",!0),a.on("animationcomplete",(()=>{a.removedFromScene(),a.destroy(),a.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()}));let r=e.last,n=r.x,h=r.y;switch(t){case o.CIRCLE:r.play("yellow-circle-animation",!0);break;case o.HEART:r.play("yellow-heart-animation",!0);break;case o.SQUARE:r.play("yellow-square-animation",!0)}r.on("animationcomplete",(()=>{r.x=n,r.y=h,e.features.push(s.YELLOW),r.off("animationcomplete")}))}else{if(t!=s.BROWN&&t!=s.PINK&&t!=s.YELLOW)return;{let a=this.getStart(e.features),r=e.last,n=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","yellow_flour_00.png").setOrigin(.5,0);switch(n.setDepth(this.flourSpot.depth-1),t){case s.BROWN:n.playReverse("brown-flour-animation",!0);break;case s.PINK:n.playReverse("pink-flour-animation",!0);break;case s.YELLOW:n.playReverse("yellow-flour-animation",!0)}switch(e.features.pop(),a){case o.CIRCLE:r.setFrame("circle_00.png");break;case o.HEART:r.setFrame("heart_00.png");break;case o.SQUARE:r.setFrame("square_00.png")}n.on("animationcomplete",(()=>{n.removedFromScene(),n.destroy(),n.off("animationcomplete");let t=this.add.sprite(this.flourSpot.x,this.flourSpot.y+this.flourSpot.displayHeight+i,"comfy-spritesheet","yellow_flour_00.png").setOrigin(.5,0);switch(t.setDepth(this.flourSpot.depth-1),t.play("yellow-flour-animation",!0),t.on("animationcomplete",(()=>{t.removedFromScene(),t.destroy(),t.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()})),a){case o.CIRCLE:r.play("yellow-circle-animation",!0);break;case o.HEART:r.play("yellow-heart-animation",!0);break;case o.SQUARE:r.play("yellow-square-animation",!0)}e.features.push(s.YELLOW)}))}}}doBurn(){if(this.isMaking)return;let e=this.getCakeByPos(this.tasteSpot);if(!e)return this.shake(this.tasteSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t==a.BROWN||t==a.PINK||t==a.YELLOW||t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF||t==h.SPICE){let i,s,r;if(this.timer.visible&&this.timer.pause(),this.tasteSpot.play("burn-animation",!0),this.tasteSpot.on("animationcomplete",(()=>{this.tasteSpot.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()})),t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF?(i=e.getAt(e.length-2),s=this.getLast(e.features),r=this.getEndFrame(e.features)):t==h.SPICE?(i=e.getAt(e.length-3),s=e.features[e.features.length-3],r=this.getEndFrame(e.features)):(i=e.last,s=this.getEnd(e.features),r=this.getEndFrame(e.features)),s==a.BROWN)switch(r){case o.CIRCLE:i.setFrame("brown_burn_circle.png");break;case o.HEART:i.setFrame("brown_burn_heart.png");break;case o.SQUARE:i.setFrame("brown_burn_square.png")}else if(s==a.PINK)switch(r){case o.CIRCLE:i.setFrame("pink_burn_circle.png");break;case o.HEART:i.setFrame("pink_burn_heart.png");break;case o.SQUARE:i.setFrame("pink_burn_square.png")}else if(s==a.YELLOW)switch(r){case o.CIRCLE:i.setFrame("yellow_burn_circle.png");break;case o.HEART:i.setFrame("yellow_burn_heart.png");break;case o.SQUARE:i.setFrame("yellow_burn_square.png")}e.features.push(h.BURN),u.level!=c.ADVANCED&&u.level!=c.INTERMEDIATE||this.showChar()}}doSpice(){if(this.isMaking)return;let e=this.getCakeByPos(this.tasteSpot);if(!e)return this.shake(this.tasteSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t==a.BROWN||t==a.PINK||t==a.YELLOW||t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF||t==h.BURN){let i,s,a,r;switch(this.timer.visible&&this.timer.pause(),this.tasteSpot.play("spice-animation",!0),this.tasteSpot.on("animationcomplete",(()=>{this.tasteSpot.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume()})),t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF?(i=e.getAt(e.length-2),s=this.getLast(e.features),a=this.getEndFrame(e.features)):(i=e.last,s=this.getEnd(e.features),a=this.getEndFrame(e.features)),a){case o.CIRCLE:r=this.add.image(i.x,i.y,"comfy-spritesheet","spice_circle.png").setOrigin(.5),e.add(r),r.x=i.x,r.y=i.y-5;break;case o.HEART:r=this.add.image(i.x,i.y,"comfy-spritesheet","spice_heart.png").setOrigin(.5),e.add(r),r.x=i.x,r.y=i.y-5;break;case o.SQUARE:r=this.add.image(i.x,i.y,"comfy-spritesheet","spice_square.png").setOrigin(.5),e.add(r),r.x=i.x,r.y=i.y-5}e.features.push(h.SPICE),u.level!=c.ADVANCED&&u.level!=c.INTERMEDIATE||this.showChar()}}doRedRibbon(){if(this.isMaking)return;let e=this.getCakeByPos(this.ribbonSpot);if(!e)return this.shake(this.ribbonSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause(),this.clearCake(e);let i=b.calPaddingY(e.features),s=this.add.sprite(this.ribbonSpot.x,this.ribbonSpot.y+this.ribbonSpot.displayHeight,"comfy-spritesheet","red_ribbon_00.png").setOrigin(.5,0);s.play("red-ribbon-animation"),s.on("animationcomplete",(()=>{let n;switch(s.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.removedFromScene(),s.destroy(),this.getEndFrame(e.features)){case o.CIRCLE:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("red_ribbon_circle.png"),e.features.pop(),e.features.push(r.RED)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","red_ribbon_circle.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.RED));break;case o.HEART:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("red_ribbon_heart.png"),e.features.pop(),e.features.push(r.RED)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","red_ribbon_heart.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.RED));break;case o.SQUARE:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("red_ribbon_square.png"),e.features.pop(),e.features.push(r.RED)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","red_ribbon_square.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.RED))}}))}}doWhiteRibbon(){if(this.isMaking)return;let e=this.getCakeByPos(this.ribbonSpot);if(!e)return this.shake(this.ribbonSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause(),this.clearCake(e);let i=b.calPaddingY(e.features),s=this.add.sprite(this.ribbonSpot.x,this.ribbonSpot.y+this.ribbonSpot.displayHeight,"comfy-spritesheet","white_ribbon_00.png").setOrigin(.5,0);s.play("white-ribbon-animation"),s.on("animationcomplete",(()=>{let n;switch(s.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.removedFromScene(),s.destroy(),this.getEndFrame(e.features)){case o.CIRCLE:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("white_ribbon_circle.png"),e.features.pop(),e.features.push(r.WHITE)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","white_ribbon_circle.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.WHITE));break;case o.HEART:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("white_ribbon_heart.png"),e.features.pop(),e.features.push(r.WHITE)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","white_ribbon_heart.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.WHITE));break;case o.SQUARE:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("white_ribbon_square.png"),e.features.pop(),e.features.push(r.WHITE)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","white_ribbon_square.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.WHITE))}}))}}doGreenRibbon(){if(this.isMaking)return;let e=this.getCakeByPos(this.ribbonSpot);if(!e)return this.shake(this.ribbonSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause(),this.clearCake(e);let i=b.calPaddingY(e.features),s=this.add.sprite(this.ribbonSpot.x,this.ribbonSpot.y+this.ribbonSpot.displayHeight,"comfy-spritesheet","green_ribbon_00.png").setOrigin(.5,0);s.play("green-ribbon-animation"),s.on("animationcomplete",(()=>{let n;switch(s.off("animationcomplete"),this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.removedFromScene(),s.destroy(),this.getEndFrame(e.features)){case o.CIRCLE:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("green_ribbon_circle.png"),e.features.pop(),e.features.push(r.GREEN)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","green_ribbon_circle.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.GREEN));break;case o.HEART:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("green_ribbon_heart.png"),e.features.pop(),e.features.push(r.GREEN)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","green_ribbon_heart.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.GREEN));break;case o.SQUARE:t==r.RED||t==r.RED||t==r.GREEN||t==a.BROWN||t==a.PINK||t==a.YELLOW?(n=e.last,n.setFrame("green_ribbon_square.png"),e.features.pop(),e.features.push(r.GREEN)):(n=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","green_ribbon_square.png"),n.scaleX=n.scaleY=.9,e.add(n),n.x=-1,n.y=i,e.features.push(r.GREEN))}}))}}doBrownCream(){if(this.isMaking)return;let e=this.getCakeByPos(this.creamSpot);if(!e)return this.shake(this.creamSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(null!=t&&t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);this.creamSpot.play("brown-spot-animation"),this.creamSpot.on("animationcomplete",(()=>{this.creamSpot.off("animationcomplete");let s,h=this.add.sprite(this.creamSpot.x,this.creamSpot.y+this.creamSpot.displayHeight+50+i,"comfy-spritesheet","brown_line_00.png").setOrigin(.5);switch(h.setDepth(this.creamSpot.depth-1),h.play("brown-cream-animation"),h.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),h.off("animationcomplete"),h.removedFromScene(),h.destroy()})),this.clearCake(e),t=this.getEnd(e.features),this.getEndFrame(e.features)){case o.CIRCLE:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("brown_cream_circle.png"),e.features.pop(),e.features.push(a.BROWN)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","brown_cream_circle.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.BROWN));break;case o.HEART:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("brown_cream_heart.png"),e.features.pop(),e.features.push(a.BROWN)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","brown_cream_heart.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.BROWN));break;case o.SQUARE:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("brown_cream_square.png"),e.features.pop(),e.features.push(a.BROWN)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","brown_cream_square.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.BROWN))}}))}else this.shake(this.frameSpot)}doPinkCream(){if(this.isMaking)return;let e=this.getCakeByPos(this.creamSpot);if(!e)return this.shake(this.creamSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(null!=t&&t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);this.creamSpot.play("pink-spot-animation"),this.creamSpot.on("animationcomplete",(()=>{this.creamSpot.off("animationcomplete");let s,h=this.add.sprite(this.creamSpot.x,this.creamSpot.y+this.creamSpot.displayHeight+50+i,"comfy-spritesheet","pink_line_00.png").setOrigin(.5);switch(h.setDepth(this.creamSpot.depth-1),h.play("pink-cream-animation"),h.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),h.off("animationcomplete"),h.removedFromScene(),h.destroy()})),this.clearCake(e),t=this.getEnd(e.features),this.getEndFrame(e.features)){case o.CIRCLE:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("pink_cream_circle.png"),e.features.pop(),e.features.push(a.PINK)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","pink_cream_circle.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.PINK));break;case o.HEART:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("pink_cream_heart.png"),e.features.pop(),e.features.push(a.PINK)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","pink_cream_heart.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.PINK));break;case o.SQUARE:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("pink_cream_square.png"),e.features.pop(),e.features.push(a.PINK)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","pink_cream_square.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.PINK))}}))}else this.shake(this.frameSpot)}doYellowCream(){if(this.isMaking)return;let e=this.getCakeByPos(this.creamSpot);if(!e)return this.shake(this.creamSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(null!=t&&t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);this.creamSpot.play("yellow-spot-animation"),this.creamSpot.on("animationcomplete",(()=>{this.creamSpot.off("animationcomplete");let s,h=this.add.sprite(this.creamSpot.x,this.creamSpot.y+this.creamSpot.displayHeight+50+i,"comfy-spritesheet","yellow_line_00.png").setOrigin(.5);switch(h.setDepth(this.creamSpot.depth-1),h.play("yellow-cream-animation"),h.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),h.off("animationcomplete"),h.removedFromScene(),h.destroy()})),this.clearCake(e),t=this.getEnd(e.features),this.getEndFrame(e.features)){case o.CIRCLE:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("yellow_cream_circle.png"),e.features.pop(),e.features.push(a.YELLOW)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","yellow_cream_circle.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.YELLOW));break;case o.HEART:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("yellow_cream_heart.png"),e.features.pop(),e.features.push(a.YELLOW)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","yellow_cream_heart.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.YELLOW));break;case o.SQUARE:t==a.BROWN||t==a.PINK||t==a.YELLOW||t==r.GREEN||t==r.RED||t==r.WHITE?(s=e.last,s.setFrame("yellow_cream_square.png"),e.features.pop(),e.features.push(a.YELLOW)):(t!=n.BUTTONS&&t!=n.EMOTICON&&t!=n.HEART&&t!=n.LEAF||(e.removeAt(e.length-1,!0),e.features.pop()),s=this.add.sprite(0,-5+e.length- -45,"comfy-spritesheet","yellow_cream_square.png"),s.scaleX=s.scaleY=.95,e.add(s),s.x=-1,s.y=i,e.features.push(a.YELLOW))}}))}else this.shake(this.frameSpot)}doButtonsIcon(){if(this.isMaking)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","buttons_00.png").setOrigin(0,.5);s.play("buttons-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","buttons_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.pop(),e.features.push(n.BUTTONS)}else if(t==h.BURN){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","buttons_00.png").setOrigin(0,.5);s.play("buttons-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","buttons_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.BUTTONS)}else if(t==h.SPICE){let t=this.getLast(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.getAt(e.length-2);e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","buttons_00.png").setOrigin(0,.5);s.play("buttons-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","buttons_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.BUTTONS)}}else{let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","buttons_00.png").setOrigin(.5);t.play("buttons-animation"),this.add.tween({targets:t,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","buttons_icon.png").setOrigin(.5);s.x=0,s.y=i,e.add(s)})),e.features.push(n.BUTTONS)}u.level==c.EASY&&this.showChar()}}doHeartIcon(){if(this.isMaking)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","heart_icon_00.png").setOrigin(0,.5);s.play("heart-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","heart_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.pop(),e.features.push(n.HEART)}else if(t==h.BURN){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","heart_icon_00.png").setOrigin(0,.5);s.play("heart-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","heart_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.HEART)}else if(t==h.SPICE){let t=this.getLast(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.getAt(e.length-2);e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","heart_icon_00.png").setOrigin(0,.5);s.play("heart-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","heart_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.HEART)}}else{let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","heart_icon_00.png").setOrigin(0,.5);t.play("heart-animation"),this.add.tween({targets:t,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","heart_icon.png").setOrigin(.5);e.add(s),s.x=0,s.y=i})),e.features.push(n.HEART)}u.level==c.EASY&&this.showChar()}}doEmoticon(){if(this.isMaking)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","emoticon_00.png").setOrigin(0,.5);s.play("emoticon-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.pop(),e.features.push(n.EMOTICON)}else if(t==h.BURN){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","emoticon_00.png").setOrigin(0,.5);s.play("emoticon-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.EMOTICON)}else if(t==h.SPICE){let t=this.getLast(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.getAt(e.length-2);e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","emoticon_00.png").setOrigin(0,.5);s.play("emoticon-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.EMOTICON)}}else{let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","emoticon_00.png").setOrigin(0,.5);t.play("emoticon-animation"),this.add.tween({targets:t,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","emoticon_icon.png").setOrigin(.5);s.x=0,s.y=i,e.add(s)})),e.features.push(n.EMOTICON)}u.level==c.EASY&&this.showChar()}}doLeafIcon(){if(this.isMaking)return;let e=this.getCakeByPos(this.decorateSpot);if(!e)return this.shake(this.decorateSpot),void this.hightlight(this.buttonHightlight);let t=this.getEnd(e.features);if(t!=o.CIRCLE&&t!=o.HEART&&t!=o.SQUARE){this.isMaking=!0,this.timer.visible&&this.timer.pause();let i=b.calPaddingY(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","leaf_00.png").setOrigin(0,.5);s.scaleX=s.scaleY=1.5,s.play("leaf-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","leaf_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.pop(),e.features.push(n.LEAF)}else if(t==h.BURN){let t=e.last;e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","leaf_00.png").setOrigin(0,.5);s.scaleX=s.scaleY=1.5,s.play("leaf-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","leaf_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.LEAF)}else if(t==h.SPICE){let t=this.getLast(e.features);if(t==n.BUTTONS||t==n.EMOTICON||t==n.HEART||t==n.LEAF){let t=e.getAt(e.length-2);e.remove(t),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","leaf_00.png").setOrigin(0,.5);s.scaleX=s.scaleY=1.5,s.play("leaf-animation"),this.add.tween({targets:s,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),s.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),s.off("animationcomplete"),s.removedFromScene(),s.destroy();let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","leaf_icon.png").setOrigin(.5);t.x=0,t.y=i,e.add(t)})),e.features.splice(e.features.length-2,1),e.features.splice(e.features.length-1,0,n.LEAF)}}else{let t=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y+this.decorateSpot.displayHeight,"comfy-spritesheet","leaf_00.png").setOrigin(0,.5);t.scaleX=t.scaleY=1.5,t.play("leaf-animation"),this.add.tween({targets:t,y:e.y+i-10,duration:200,onComplete:()=>{},callbackScope:this}),t.on("animationcomplete",(()=>{this.isMaking=!1,this.timer.visible&&this.timer.resume(),t.off("animationcomplete"),t.removedFromScene(),t.destroy();let s=this.add.sprite(this.decorateSpot.x,this.decorateSpot.y,"comfy-spritesheet","leaf_icon.png").setOrigin(.5);s.x=0,s.y=i,e.add(s)})),e.features.push(n.LEAF)}u.level==c.EASY&&this.showChar()}}update(e,t){this.timer.visible&&this.timer.update()}getCakeByPos(e){let t=null;for(let i=0;i<this.cakes.length;i++)if(this.cakes[i].x==e.x)return t=this.cakes[i],t;return t}getEnd(e){return e[e.length-1]}getStart(e){return e[0]}getFirst(e){return e[1]}getLast(e){return e[e.length-2]}getEndFrame(e){let t=null;for(let i=0;i<e.length;i++)e[i]!=o.CIRCLE&&e[i]!=o.HEART&&e[i]!=o.SQUARE||(t=e[i]);return t}clearCake(e){let t=e.features.length-1,i=e.length-1;for(;e.features[t]==n.BUTTONS||e.features[t]==n.EMOTICON||e.features[t]==n.HEART||e.features[t]==n.LEAF||e.features[t]==h.BURN||e.features[t]==h.SPICE;)e.features[t]!=h.BURN&&(e.removeAt(i,!0),i--),e.features.pop(),t--}getEndDecorate(e){let t=null;for(let i=0;i<e.length;i++)e[i]!=n.BUTTONS&&e[i]!=n.EMOTICON&&e[i]!=n.HEART&&e[i]!=n.LEAF||(t=e[i]);return t}getFrameNum(e){let t=0;for(let i=0;i<e.length;i++)e[i]!=o.CIRCLE&&e[i]!=o.HEART&&e[i]!=o.SQUARE||t++;return t}hightlight(e){e.visible=!0,e.alpha=0,this.add.tween({targets:e,alpha:1,duration:200,yoyo:!0,repeat:2,onComplete:()=>{e.visible=!1}})}canMove(e,t){for(let i=0;i<this.cakes.length;i++)if(this.cakes[i].x==e&&this.cakes[i].y==t)return!1;return!0}shake(e){this.tweens.add({targets:e,x:"+=20",duration:50,yoyo:!0,repeat:1})}getIndex(e,t){for(let i=0;i<e.length;i++)if(e[i]==t)return i}isExistMakingCake(){for(let e=0;e<this.cakes.length;e++)if(this.cakes[e].features.length>0)return!0;return!1}}class z extends E{constructor(e){super(e),this.gameObject=e,e.__PushOnClick=this}static getComponent(e){return e.__PushOnClick}awake(){this.gameObject.setInteractive().on("pointerdown",(()=>{this.scene.add.tween({targets:this.gameObject,scaleX:"*=0.8",scaleY:"*=0.8",duration:80,yoyo:!0})}))}}class J extends p().Scene{constructor(){super("MenuScene")}editorCreate(){const e=this.add.text(369,224,"",{});e.text="Easy";const t=this.add.text(369,269,"",{});t.text="Intermediate";const i=this.add.text(369,314,"",{});i.text="Advanced";const s=this.add.image(0,0,"canvasIcon");s.visible=!1,new z(e),new z(t),new z(i),new O(s),this.easy=e,this.intermediate=t,this.advanced=i,this.canvasRef=s,this.events.emit("scene-awake")}create(){this.editorCreate(),g.setCurrentScene(this),this.easy.on("pointerdown",(()=>{window.parent.postMessage(c.EASY,"*"),u.level=c.EASY,g.enterPlayScene()})),this.intermediate.on("pointerdown",(()=>{window.parent.postMessage(c.INTERMEDIATE,"*"),u.level=c.INTERMEDIATE,g.enterPlayScene()})),this.advanced.on("pointerdown",(()=>{window.parent.postMessage(c.ADVANCED,"*"),u.level=c.ADVANCED,g.enterPlayScene()}))}}const Z=i.p+"asset-packs/preload-asset-pack-d2062e6280650ace4ef5.json";class $ extends E{constructor(e){super(e),this.gameObject=e,e.__PreloadText=this,this.scene.load.on(p().Loader.Events.PROGRESS,(e=>{this.gameObject.text=Math.floor(100*e)+"%"}))}static getComponent(e){return e.__PreloadText}}const ee=i.p+"asset-packs/asset-pack-fcb8df6b96ce3fc7bff1.json";class te extends p().Scene{constructor(){super("Preload")}editorCreate(){const e=this.add.image(400,219,"guapen");e.scaleX=.5915891440784282,e.scaleY=.5915891440784282;const t=this.add.text(400,349,"",{});t.setOrigin(.5,.5),t.text="0%",t.setStyle({fontSize:"30px"});const i=this.add.image(0,0,"canvasIcon");i.visible=!1,new $(t),new O(i),this.events.emit("scene-awake")}preload(){this.editorCreate(),g.setCurrentScene(this),this.load.pack("asset-pack",ee),this.load.on(p().Loader.Events.COMPLETE,(()=>{window.parent.postMessage("loadDone","*"),window.addEventListener("message",(e=>{u.level=e.data?e.data:c.EASY,g.enterPlayScene()}))}))}create(){}}class ie extends p().Scene{constructor(){super("Boot")}preload(){this.load.pack("pack",Z)}create(){g.setCurrentScene(this),g.init()}}window.addEventListener("load",(function(){globalThis.screenBaseSize={width:800,height:496},new(p().Game)({type:p().AUTO,scale:{mode:p().Scale.RESIZE,parent:"game",width:800,height:496},dom:{createContainer:!0},backgroundColor:"#2f2f2f",scene:[ie,te,Q,J]}).scene.start("Boot")}))}},a={};function r(e){var t=a[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var i=a[e]={exports:{}};try{var n={id:e,module:i,factory:s[e],require:r};r.i.forEach((function(e){e(n)})),i=n.module,n.factory.call(i.exports,i,i.exports,n.require)}catch(e){throw i.error=e,e}return i.exports}r.m=s,r.c=a,r.i=[],e=[],r.O=(t,i,s,a)=>{if(!i){var n=1/0;for(c=0;c<e.length;c++){for(var[i,s,a]=e[c],o=!0,h=0;h<i.length;h++)(!1&a||n>=a)&&Object.keys(r.O).every((e=>r.O[e](i[h])))?i.splice(h--,1):(o=!1,a<n&&(n=a));if(o){e.splice(c--,1);var l=s();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[i,s,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.hu=e=>e+"."+r.h()+".hot-update.js",r.hmrF=()=>"main."+r.h()+".hot-update.json",r.h=()=>"d0cfda2c1940a1a3f293",r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},i="phaser3-webpack-template:",r.l=(e,s,a,n)=>{if(t[e])t[e].push(s);else{var o,h;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var d=l[c];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==i+a){o=d;break}}o||(h=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",i+a),o.src=e),t[e]=[s];var p=(i,s)=>{o.onerror=o.onload=null,clearTimeout(m);var a=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach((e=>e(s))),i)return i(s)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=p.bind(null,o.onerror),o.onload=p.bind(null,o.onload),h&&document.head.appendChild(o)}},(()=>{var e,t,i,s={},a=r.c,n=[],o=[],h="idle",l=0,c=[];function d(e){h=e;for(var t=[],i=0;i<o.length;i++)t[i]=o[i].call(null,e);return Promise.all(t)}function p(){0==--l&&d("ready").then((function(){if(0===l){var e=c;c=[];for(var t=0;t<e.length;t++)e[t]()}}))}function m(e){if("idle"!==h)throw new Error("check() is only allowed in idle status");return d("check").then(r.hmrM).then((function(i){return i?d("prepare").then((function(){var s=[];return t=[],Promise.all(Object.keys(r.hmrC).reduce((function(e,a){return r.hmrC[a](i.c,i.r,i.m,e,t,s),e}),[])).then((function(){return t=function(){return e?g(e):d("ready").then((function(){return s}))},0===l?t():new Promise((function(e){c.push((function(){e(t())}))}));var t}))})):d(f()?"ready":"idle").then((function(){return null}))}))}function u(e){return"ready"!==h?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status (state: "+h+")")})):g(e)}function g(e){e=e||{},f();var s=t.map((function(t){return t(e)}));t=void 0;var a=s.map((function(e){return e.error})).filter(Boolean);if(a.length>0)return d("abort").then((function(){throw a[0]}));var r=d("dispose");s.forEach((function(e){e.dispose&&e.dispose()}));var n,o=d("apply"),h=function(e){n||(n=e)},l=[];return s.forEach((function(e){if(e.apply){var t=e.apply(h);if(t)for(var i=0;i<t.length;i++)l.push(t[i])}})),Promise.all([r,o]).then((function(){return n?d("fail").then((function(){throw n})):i?g(e).then((function(e){return l.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):d("idle").then((function(){return l}))}))}function f(){if(i)return t||(t=[]),Object.keys(r.hmrI).forEach((function(e){i.forEach((function(i){r.hmrI[e](i,t)}))})),i=void 0,!0}r.hmrD=s,r.i.push((function(c){var g,f,y,b,E=c.module,S=function(t,i){var s=a[i];if(!s)return t;var r=function(r){if(s.hot.active){if(a[r]){var o=a[r].parents;-1===o.indexOf(i)&&o.push(i)}else n=[i],e=r;-1===s.children.indexOf(r)&&s.children.push(r)}else console.warn("[HMR] unexpected require("+r+") from disposed module "+i),n=[];return t(r)},o=function(e){return{configurable:!0,enumerable:!0,get:function(){return t[e]},set:function(i){t[e]=i}}};for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&"e"!==c&&Object.defineProperty(r,c,o(c));return r.e=function(e){return function(e){switch(h){case"ready":d("prepare");case"prepare":return l++,e.then(p,p),e;default:return e}}(t.e(e))},r}(c.require,c.id);E.hot=(g=c.id,f=E,b={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:y=e!==g,_requireSelf:function(){n=f.parents.slice(),e=y?void 0:g,r(g)},active:!0,accept:function(e,t,i){if(void 0===e)b._selfAccepted=!0;else if("function"==typeof e)b._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var s=0;s<e.length;s++)b._acceptedDependencies[e[s]]=t||function(){},b._acceptedErrorHandlers[e[s]]=i;else b._acceptedDependencies[e]=t||function(){},b._acceptedErrorHandlers[e]=i},decline:function(e){if(void 0===e)b._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)b._declinedDependencies[e[t]]=!0;else b._declinedDependencies[e]=!0},dispose:function(e){b._disposeHandlers.push(e)},addDisposeHandler:function(e){b._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=b._disposeHandlers.indexOf(e);t>=0&&b._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,h){case"idle":t=[],Object.keys(r.hmrI).forEach((function(e){r.hmrI[e](g,t)})),d("ready");break;case"ready":Object.keys(r.hmrI).forEach((function(e){r.hmrI[e](g,t)}));break;case"prepare":case"check":case"dispose":case"apply":(i=i||[]).push(g)}},check:m,apply:u,status:function(e){if(!e)return h;o.push(e)},addStatusHandler:function(e){o.push(e)},removeStatusHandler:function(e){var t=o.indexOf(e);t>=0&&o.splice(t,1)},data:s[g]},e=void 0,b),E.parents=n,E.children=[],n=[],c.require=S})),r.hmrC={},r.hmrI={}})(),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e})(),(()=>{var e,t,i,s,a,n=r.hmrS_jsonp=r.hmrS_jsonp||{179:0},o={};function h(t,i){return e=i,new Promise(((e,i)=>{o[t]=e;var s=r.p+r.hu(t),a=new Error;r.l(s,(e=>{if(o[t]){o[t]=void 0;var s=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;a.message="Loading hot update chunk "+t+" failed.\n("+s+": "+r+")",a.name="ChunkLoadError",a.type=s,a.request=r,i(a)}}))}))}function l(e){function o(e){for(var t=[e],i={},s=t.map((function(e){return{chain:[e],id:e}}));s.length>0;){var a=s.pop(),n=a.id,o=a.chain,l=r.c[n];if(l&&(!l.hot._selfAccepted||l.hot._selfInvalidated)){if(l.hot._selfDeclined)return{type:"self-declined",chain:o,moduleId:n};if(l.hot._main)return{type:"unaccepted",chain:o,moduleId:n};for(var c=0;c<l.parents.length;c++){var d=l.parents[c],p=r.c[d];if(p){if(p.hot._declinedDependencies[n])return{type:"declined",chain:o.concat([d]),moduleId:n,parentId:d};-1===t.indexOf(d)&&(p.hot._acceptedDependencies[n]?(i[d]||(i[d]=[]),h(i[d],[n])):(delete i[d],t.push(d),s.push({chain:o.concat([d]),id:d})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:i}}function h(e,t){for(var i=0;i<t.length;i++){var s=t[i];-1===e.indexOf(s)&&e.push(s)}}r.f&&delete r.f.jsonpHmr,t=void 0;var l={},c=[],d={},p=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var m in i)if(r.o(i,m)){var u,g=i[m],f=!1,y=!1,b=!1,E="";switch((u=g?o(m):{type:"disposed",moduleId:m}).chain&&(E="\nUpdate propagation: "+u.chain.join(" -> ")),u.type){case"self-declined":e.onDeclined&&e.onDeclined(u),e.ignoreDeclined||(f=new Error("Aborted because of self decline: "+u.moduleId+E));break;case"declined":e.onDeclined&&e.onDeclined(u),e.ignoreDeclined||(f=new Error("Aborted because of declined dependency: "+u.moduleId+" in "+u.parentId+E));break;case"unaccepted":e.onUnaccepted&&e.onUnaccepted(u),e.ignoreUnaccepted||(f=new Error("Aborted because "+m+" is not accepted"+E));break;case"accepted":e.onAccepted&&e.onAccepted(u),y=!0;break;case"disposed":e.onDisposed&&e.onDisposed(u),b=!0;break;default:throw new Error("Unexception type "+u.type)}if(f)return{error:f};if(y)for(m in d[m]=g,h(c,u.outdatedModules),u.outdatedDependencies)r.o(u.outdatedDependencies,m)&&(l[m]||(l[m]=[]),h(l[m],u.outdatedDependencies[m]));b&&(h(c,[u.moduleId]),d[m]=p)}i=void 0;for(var S,_=[],v=0;v<c.length;v++){var O=c[v],k=r.c[O];k&&(k.hot._selfAccepted||k.hot._main)&&d[O]!==p&&!k.hot._selfInvalidated&&_.push({module:O,require:k.hot._requireSelf,errorHandler:k.hot._selfAccepted})}return{dispose:function(){var e;s.forEach((function(e){delete n[e]})),s=void 0;for(var t,i=c.slice();i.length>0;){var a=i.pop(),o=r.c[a];if(o){var h={},d=o.hot._disposeHandlers;for(v=0;v<d.length;v++)d[v].call(null,h);for(r.hmrD[a]=h,o.hot.active=!1,delete r.c[a],delete l[a],v=0;v<o.children.length;v++){var p=r.c[o.children[v]];p&&(e=p.parents.indexOf(a))>=0&&p.parents.splice(e,1)}}}for(var m in l)if(r.o(l,m)&&(o=r.c[m]))for(S=l[m],v=0;v<S.length;v++)t=S[v],(e=o.children.indexOf(t))>=0&&o.children.splice(e,1)},apply:function(t){for(var i in d)r.o(d,i)&&(r.m[i]=d[i]);for(var s=0;s<a.length;s++)a[s](r);for(var n in l)if(r.o(l,n)){var o=r.c[n];if(o){S=l[n];for(var h=[],p=[],m=[],u=0;u<S.length;u++){var g=S[u],f=o.hot._acceptedDependencies[g],y=o.hot._acceptedErrorHandlers[g];if(f){if(-1!==h.indexOf(f))continue;h.push(f),p.push(y),m.push(g)}}for(var b=0;b<h.length;b++)try{h[b].call(null,S)}catch(i){if("function"==typeof p[b])try{p[b](i,{moduleId:n,dependencyId:m[b]})}catch(s){e.onErrored&&e.onErrored({type:"accept-error-handler-errored",moduleId:n,dependencyId:m[b],error:s,originalError:i}),e.ignoreErrored||(t(s),t(i))}else e.onErrored&&e.onErrored({type:"accept-errored",moduleId:n,dependencyId:m[b],error:i}),e.ignoreErrored||t(i)}}}for(var E=0;E<_.length;E++){var v=_[E],O=v.module;try{v.require(O)}catch(i){if("function"==typeof v.errorHandler)try{v.errorHandler(i,{moduleId:O,module:r.c[O]})}catch(s){e.onErrored&&e.onErrored({type:"self-accept-error-handler-errored",moduleId:O,error:s,originalError:i}),e.ignoreErrored||(t(s),t(i))}else e.onErrored&&e.onErrored({type:"self-accept-errored",moduleId:O,error:i}),e.ignoreErrored||t(i)}}return c}}}self.webpackHotUpdatephaser3_webpack_template=(t,s,n)=>{for(var h in s)r.o(s,h)&&(i[h]=s[h],e&&e.push(h));n&&a.push(n),o[t]&&(o[t](),o[t]=void 0)},r.hmrI.jsonp=function(e,t){i||(i={},a=[],s=[],t.push(l)),r.o(i,e)||(i[e]=r.m[e])},r.hmrC.jsonp=function(e,o,c,d,p,m){p.push(l),t={},s=o,i=c.reduce((function(e,t){return e[t]=!1,e}),{}),a=[],e.forEach((function(e){r.o(n,e)&&void 0!==n[e]?(d.push(h(e,m)),t[e]=!0):t[e]=!1})),r.f&&(r.f.jsonpHmr=function(e,i){t&&r.o(t,e)&&!t[e]&&(i.push(h(e)),t[e]=!0)})},r.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(r.p+r.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))},r.O.j=e=>0===n[e];var c=(e,t)=>{var i,s,[a,o,h]=t,l=0;if(a.some((e=>0!==n[e]))){for(i in o)r.o(o,i)&&(r.m[i]=o[i]);if(h)var c=h(r)}for(e&&e(t);l<a.length;l++)s=a[l],r.o(n,s)&&n[s]&&n[s][0](),n[s]=0;return r.O(c)},d=self.webpackChunkphaser3_webpack_template=self.webpackChunkphaser3_webpack_template||[];d.forEach(c.bind(null,0)),d.push=c.bind(null,d.push.bind(d))})();var n=r.O(void 0,[426],(()=>r(114)));n=r.O(n)})();